###########################
# kmt Events
###########################

add_namespace = CCP

			###############
			###CCP EVENT###
			###############

#supply from sov
country_event = {
	id = CCP.1
	title = CCP.1.t
	desc = CCP.1.d
	picture = GFX_report_event_soviet_tanks
	
	is_triggered_only = yes
	
	option = {
		name = CCP.1.a
		custom_effect_tooltip = CCP_1_tt
		hidden_effect = {
			load_oob = "CCP_sov_supply"
		}
		add_equipment_to_stockpile = { type = infantry_equipment_1 amount = 2500 producer = SOV }
		add_equipment_to_stockpile = { type = artillery_equipment_1 amount = 1000 producer = SOV }
		add_equipment_to_stockpile = { type = light_tank_equipment_1 amount = 250 producer = SOV }
	}
}

#
country_event = {
	id = CCP.2
	title = CCP.2.t
	desc = CCP.2.d
	picture = GFX_report_event_nra_march
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	option = {
		name = CCP.2.a
		effect_tooltip = {
			add_ideas = CCP_integrated_army
		}
	}
}

#wrongly purged some dude
country_event = {
	id = CCP.3
	title = CCP.3.t
	desc = CCP.3.d
	picture = GFX_report_event_chinese_officers
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	option = {
		name = CCP.3.a
		add_timed_idea = {
			days = 70
			idea = CCP_wrongly_purged_comrades
		}
	}
}

#more skilled people
country_event = {
	id = CCP.4
	title = CCP.4.t
	desc = CCP.4.d
	picture = GFX_report_event_physics_lab_02
	
	is_triggered_only = yes
	
	option = {
		name = CCP.4.a
		custom_effect_tooltip = CCP_msp_tt
		if = {
			limit = {
				has_idea = CCP_lack_skilled_personnel_10
			}
			remove_ideas = CCP_lack_skilled_personnel_10
			add_research_slot = 1
		}
			if = {
				limit = {
					has_idea = CCP_lack_skilled_personnel_9
				}
				swap_ideas = {
					remove_idea = CCP_lack_skilled_personnel_9
					add_idea = CCP_lack_skilled_personnel_10
				}
				hidden_effect = {
					country_event = { id = CCP.4 days = 30 }
				}
			}
			if = {
				limit = {
					has_idea = CCP_lack_skilled_personnel_8
				}
				swap_ideas = {
					remove_idea = CCP_lack_skilled_personnel_8
					add_idea = CCP_lack_skilled_personnel_9
				}
				hidden_effect = {
					country_event = { id = CCP.4 days = 30 }
				}
			}
			if = {
				limit = {
					has_idea = CCP_lack_skilled_personnel_7
				}
				swap_ideas = {
					remove_idea = CCP_lack_skilled_personnel_7
					add_idea = CCP_lack_skilled_personnel_8
				}
				hidden_effect = {
					country_event = { id = CCP.4 days = 30 }
				}
			}
			if = {
				limit = {
					has_idea = CCP_lack_skilled_personnel_6
				}
				swap_ideas = {
					remove_idea = CCP_lack_skilled_personnel_6
					add_idea = CCP_lack_skilled_personnel_7
				}
				hidden_effect = {
					country_event = { id = CCP.4 days = 30 }
				}
			}
			if = {
				limit = {
					has_idea = CCP_lack_skilled_personnel_5
				}
				swap_ideas = {
					remove_idea = CCP_lack_skilled_personnel_5
					add_idea = CCP_lack_skilled_personnel_6
				}
				hidden_effect = {
					country_event = { id = CCP.4 days = 30 }
				}
			}
			if = {
				limit = {
					has_idea = CCP_lack_skilled_personnel_4
				}
				swap_ideas = {
					remove_idea = CCP_lack_skilled_personnel_4
					add_idea = CCP_lack_skilled_personnel_5
				}
				hidden_effect = {
					country_event = { id = CCP.4 days = 30 }
				}
			}
			if = {
				limit = {
					has_idea = CCP_lack_skilled_personnel_3
				}
				swap_ideas = {
					remove_idea = CCP_lack_skilled_personnel_3
					add_idea = CCP_lack_skilled_personnel_4
				}
				hidden_effect = {
					country_event = { id = CCP.4 days = 30 }
				}
			}
			if = {
				limit = {
					has_idea = CCP_lack_skilled_personnel_2
				}
				swap_ideas = {
					remove_idea = CCP_lack_skilled_personnel_2
					add_idea = CCP_lack_skilled_personnel_3
				}
				hidden_effect = {
					country_event = { id = CCP.4 days = 30 }
				}
			}
			if = {
				limit = {
					has_idea = CCP_lack_skilled_personnel_1
				}
				swap_ideas = {
					remove_idea = CCP_lack_skilled_personnel_1
					add_idea = CCP_lack_skilled_personnel_2
				}
				hidden_effect = {
					country_event = { id = CCP.4 days = 30 }
				}
			}
			if = {
				limit = {
					has_idea = CCP_lack_skilled_personnel
				}
				swap_ideas = {
					remove_idea = CCP_lack_skilled_personnel
					add_idea = CCP_lack_skilled_personnel_1
				}
				hidden_effect = {
					country_event = { id = CCP.4 days = 30 }
				}
			}
	}
}

#Stalin pass away
country_event = {
	id = CCP.5
	title = CCP.5.t
	desc = CCP.5.d
	picture = GFX_report_event_stalin_propaganda
	
	trigger = {
		OR = {
			AND = {
				CCP = {
					is_ai = yes
				}
				date > 1953.3.1
			}
			AND = {
				date > 1945.10.15
				has_war = no
				CCP = {
					is_ai = no
				}
			}
			AND = {
				date > 1948.5.1
				has_war = yes
				CCP = {
					is_ai = no
				}
			}
		}
		tag = SOV
		NOT = { has_country_flag = counter_purge }
		has_government = communism
	}
	
	mean_time_to_happen = { days = 1 }
	
	fire_only_once = yes
	
	immediate = {
		hidden_effect = {
			kill_country_leader = yes
			news_event = { id = kns.4 hours = 5 }
			country_event = { id = CCP.31 days = 600 }
			create_country_leader = {
				name = "Vacant Position"
				desc = "POLITICS_PS_DESC"
				picture = "gfx/leaders/SWI/Portrait_Switzerland_Federal_council.dds"
				expire = "1965.1.1"
				ideology = marxism
				traits = {
					sov_power_truggle
				}
			}
			set_global_flag = stalin_dead
		}
	}
	
	option = {
		name = CCP.5.a
		custom_effect_tooltip = sov_power_struggle_begins
	}
}

#Hai Rui Ba gUan
country_event = {
	id = CCP.6
	title = CCP.6.t
	desc = CCP.6.d
	picture = GFX_report_event_journalists_speech
	
	trigger = {
		tag = CCP
		has_war = no
		has_country_flag = KMT_leap_stop
		OR = {
			has_global_flag = stalin_dead
			SOV = { has_country_flag = counter_purge }
			SOV = { is_puppet = yes }
			SOV = { NOT = { has_government = communism } }
		}
	}
	
	mean_time_to_happen = { days = 300 }
	
	fire_only_once = yes
	
	immediate = {
		set_global_flag = CCP_hairuibaguan
	}
	
	option = {
		name = CCP.6.a
	}
}

#Culture revolution
country_event = {
	id = CCP.7
	title = CCP.7.t
	desc = CCP.7.d
	picture = GFX_report_event_soviet_purge_speech
	
	trigger = {
		tag = CCP
		has_war = no
		has_global_flag = CCP_hairuibaguan
	}
	
	mean_time_to_happen = { days = 50 }
	
	fire_only_once = yes
	
	immediate = {
		hidden_effect = { 
			set_country_flag = cultural_revolution
			add_ideas = CCP_cultural_revolution
			set_global_flag = CCP_cr_started
		}
	}
	
	option = {
		name = CCP.7.a
		effect_tooltip = {
			add_ideas = CCP_cultural_revolution
		}
	}
}

#Lin biao's fate
country_event = {
	id = CCP.8
	title = CCP.8.t
	desc = CCP.8.d
	picture = GFX_report_event_airplane_crash
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	immediate = {
		hidden_effect = {
			set_global_flag = lin_biao_dead
			add_stability = -0.075
			remove_unit_leader = 1065
		}
	}
	
	option = {
		name = CCP.8.a
		effect_tooltip = {
			add_stability = -0.075
			remove_unit_leader = 1065
		}
	}
}

#Lin biao's fate
country_event = {
	id = CCP.9
	hidden = yes
	
	trigger = {
		tag = CCP
		has_global_flag = mao_assassin_event_fired
		NOT = {
			has_global_flag = mao_dead
		}
	}
	
	mean_time_to_happen = { days = 10 }
	
	fire_only_once = yes
	
	immediate = {
		set_global_flag = lin_biao_fate_fired
		if = {
			limit = {
				SOV = {
					exists = yes
					NOT = {
						is_puppet_of = ROOT
					}
				}
			}
			SOV = {
				save_event_target_as = CCP_linbiao_flee_target
			}
			else = {
				random_other_country = {
					limit = {
						exists = yes
						NOT = {
							is_puppet_of = ROOT
						}
					}
					save_event_target_as = CCP_linbiao_flee_target
				}
			}
		}
		if = {
			limit = {
				is_historical_focus_on = yes
			}
			random_list = {
				85 = {
					country_event = {
						id = CCP.8 
					}
				}
				15 = {
					country_event = {
						id = CCP.10
					}
				}
			}
		}
		if = {
			limit = {
				is_historical_focus_on = no
			}
			random_list = {
				60 = {
					country_event = {
						id = CCP.8 
					}
				}
				40 = {
					country_event = {
						id = CCP.10
					}
				}
			}
		}
	}
	option = {}
}

#Lin biao's fate
country_event = {
	id = CCP.10
	title = CCP.10.t
	desc = CCP.10.d
	picture = GFX_report_event_journalists_speech
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	immediate = {
		hidden_effect = {
			set_global_flag = lin_biao_fled_to_soviet
			add_stability = -0.075
			remove_unit_leader = 1065
		}
	}
	
	option = {
		name = CCP.10.a
		effect_tooltip = {
			add_stability = -0.075
			remove_unit_leader = 1065
		}
	}
}

#death of Zhou en lai
country_event = {
	id = CCP.11
	title = CCP.11.t
	desc = CCP.11.d
	picture = GFX_report_event_europe_funeral
	
	trigger = {
		tag = CCP
		has_war = no
		has_global_flag = CCP_cr_started
	}
	
	mean_time_to_happen = { days = 111 }
	
	fire_only_once = yes
	
	immediate = {
		hidden_effect = {
			set_country_flag = death_of_zel	
			add_stability = -0.075
		}
	}
	
	option = {
		name = CCP.11.a
		effect_tooltip = {
			add_stability = -0.075
		}
	}
}

#death of mao ze dong
country_event = {
	id = CCP.12
	title = CCP.12.t
	desc = CCP.12.d
	picture = GFX_report_event_europe_funeral
	
	trigger = {
		tag = CCP
		has_global_flag = lin_biao_fate_fired
		NOT = {
			has_country_flag = mao_assassinated
		}
	}
	
	mean_time_to_happen = { days = 80 }
	
	fire_only_once = yes
	
	immediate = {
		hidden_effect = {
			kill_country_leader = yes
			remove_unit_leader = 1064
			if = {
				limit = {
					OR = {
						has_global_flag = lin_biao_dead
						has_global_flag = lin_biao_fled_to_soviet
					}
				}
				create_country_leader = {
					name = "Hua Guofeng"
					desc = "POLITICS_HUA_GUO_FENG_DESC"
					picture = "gfx/leaders/Asia/Portrait_Asia_Generic_communism.dds"
					expire = "1965.1.1"
					ideology = marxism
					traits = {
					}
				}
				set_country_flag = huaguofeng
			}
			if = {
				limit = {
					NOT = {
						has_global_flag = lin_biao_dead
						has_global_flag = lin_biao_fled_to_soviet
					}
				}
				create_country_leader = {
					name = "Lin Biao"
					desc = "POLITICS_LIN_BIAO_FENG_DESC"
					picture = "gfx/leaders/kmt_mod/Lin_Biao_back.dds"
					expire = "1965.1.1"
					ideology = marxism
					traits = {
					}
				}
				create_field_marshal = {
					name = "Lin Biao"
					portrait_path = "gfx/leaders/kmt_mod/Lin_Biao_back.dds"
					traits = {  defensive_doctrine offensive_doctrine inspirational_leader logistics_wizard organisational_leader }
					skill = 3
					id = 1100
					attack_skill = 3
					defense_skill = 4
					planning_skill = 3
					logistics_skill = 2
				}
				set_country_flag = lin_biao
				add_political_power = 500
				add_manpower = -5750000
				remove_ideas = CCP_cultural_revolution
				add_timed_idea = {
					idea = CCP_cultural_revolution_aftermath
					days = 600
				}
				set_global_flag = CR_ended
			}
			add_stability = -0.075
			set_global_flag = mao_dead
		}
	}
	
	option = {
		name = CCP.12.a
		effect_tooltip = {
			add_stability = -0.075
			if = {
				limit = {
					OR = {
						has_global_flag = lin_biao_dead
						has_global_flag = lin_biao_fled_to_soviet
					}
				}
				create_country_leader = {
					name = "Hua Guofeng"
					ideology = marxism
				}
			}
			if = {
				limit = {
					NOT = {
						has_global_flag = lin_biao_dead
						has_global_flag = lin_biao_fled_to_soviet
					}
				}
				create_country_leader = {
					name = "Lin Biao"
					ideology = marxism
				}
				add_political_power = 500
				add_manpower = -5750000
				remove_ideas = CCP_cultural_revolution
				add_timed_idea = {
					idea = CCP_cultural_revolution_aftermath
					days = 600
				}
			}
			remove_unit_leader = 1064
		}
	}
}

#Gang of Four Crushed
country_event = {
	id = CCP.13
	title = CCP.13.t
	desc = CCP.13.d
	picture = GFX_report_event_crowd_in_prague
	
	trigger = {
		tag = CCP
		has_country_flag = huaguofeng
	}
	
	mean_time_to_happen = { days = 45 }
	
	fire_only_once = yes
	
	immediate = {
		hidden_effect = {
			add_political_power = 500
			add_manpower = -1750000
			remove_ideas = CCP_cultural_revolution
			add_timed_idea = {
				idea = CCP_cultural_revolution_aftermath
				days = 1400
			}
			set_global_flag = CR_ended
		}
	}
	
	option = {
		name = CCP.13.a
		effect_tooltip = {
			add_political_power = 500
			add_manpower = -1750000
			remove_ideas = CCP_cultural_revolution
			add_timed_idea = {
				idea = CCP_cultural_revolution_aftermath
				days = 1400
			}
		}
	}
}

#economic reform foreign investment
country_event = {
	id = CCP.14
	title = CCP.14.t
	desc = CCP.14.d
	picture = GFX_report_event_second_vienna_award_pact
	
	trigger = {
		tag = CCP
		focus_progress = {
			progress > 0.1
			focus = CCP_economic_reform
		}
	}
	mean_time_to_happen = { days = 2 }
	
	immediate = {
		every_other_country = {
			add_opinion_modifier = {
				target = CCP
				modifier = CCP_swcc_2
			}
		}
	}
	
	fire_only_once = yes
	
	option = {
		name = CCP.14.a
		random_owned_controlled_state = {
			limit = {
				free_building_slots = {
					building = industrial_complex
					size > 2
					include_locked = yes
				}
			}
			add_extra_state_shared_building_slots = 3
			add_building_construction = {
				type = industrial_complex
				level = 3
				instant_build = yes
			}
			add_building_construction = {
				type = infrastructure
				level = 4
				instant_build = yes
			}
		}
		custom_effect_tooltip = CCP_more_trade_deals_tt
		hidden_effect = {
			remove_ideas = CCP_socialism_with_chinese_characteristics
			add_ideas = CCP_socialism_with_chinese_characteristics_2
		}
	}
}

#foreign research introduction
country_event = {
	id = CCP.15
	title = CCP.15.t
	desc = CCP.15.d
	picture = GFX_report_event_physics_lab_01
	
	trigger = {
		tag = CCP
		focus_progress = {
			progress > 0.25
			focus = CCP_economic_reform
		}
	}
	
	mean_time_to_happen = { days = 2 }
	fire_only_once = yes
	
	option = {
		name = CCP.15.a
		custom_effect_tooltip = CCP_more_research_tt
		hidden_effect = {
			remove_ideas = CCP_socialism_with_chinese_characteristics_2
			add_ideas = CCP_socialism_with_chinese_characteristics_3
		}
	}
}

#more foreign investments
country_event = {
	id = CCP.16
	title = CCP.14.t
	desc = CCP.14.d
	picture = GFX_report_event_second_vienna_award_pact
	
	trigger = {
		tag = CCP
		focus_progress = {
			progress > 0.4
			focus = CCP_economic_reform
		}
	}
	mean_time_to_happen = { days = 2 }
	
	immediate = {
		every_other_country = {
			add_opinion_modifier = {
				target = CCP
				modifier = CCP_swcc_3
			}
		}
	}
	
	fire_only_once = yes
	
	option = {
		name = CCP.14.a
		random_owned_controlled_state = {
			limit = {
				free_building_slots = {
					building = industrial_complex
					size > 2
					include_locked = yes
				}
			}
			add_extra_state_shared_building_slots = 3
			add_building_construction = {
				type = industrial_complex
				level = 3
				instant_build = yes
			}
			add_building_construction = {
				type = infrastructure
				level = 4
				instant_build = yes
			}
		}
		custom_effect_tooltip = CCP_more_trade_deals_and_construct_tt
		hidden_effect = {
			remove_ideas = CCP_socialism_with_chinese_characteristics_3
			add_ideas = CCP_socialism_with_chinese_characteristics_4
		}
	}
}

#more foreign investments
country_event = {
	id = CCP.17
	title = CCP.15.t
	desc = CCP.15.d
	picture = GFX_report_event_physics_lab_01
	
	trigger = {
		tag = CCP
		focus_progress = {
			progress > 0.6
			focus = CCP_economic_reform
		}
	}
	
	fire_only_once = yes
	
	option = {
		name = CCP.15.a
		add_research_slot = 1
	}
}

#more foreign investments
country_event = {
	id = CCP.18
	title = CCP.14.t
	desc = CCP.14.d
	picture = GFX_report_event_second_vienna_award_pact
	
	trigger = {
		tag = CCP
		focus_progress = {
			progress > 0.7
			focus = CCP_economic_reform
		}
	}
	
	immediate = {
		every_other_country = {
			add_opinion_modifier = {
				target = CCP
				modifier = CCP_swcc_4
			}
		}
	}
	
	mean_time_to_happen = { days = 2 }
	fire_only_once = yes
	
	option = {
		name = CCP.14.a
		random_owned_controlled_state = {
			limit = {
				free_building_slots = {
					building = industrial_complex
					size > 2
					include_locked = yes
				}
			}
			add_extra_state_shared_building_slots = 3
			add_building_construction = {
				type = industrial_complex
				level = 3
				instant_build = yes
			}
			add_building_construction = {
				type = infrastructure
				level = 4
				instant_build = yes
			}
		}
		custom_effect_tooltip = CCP_more_trade_deals_and_construct_tt
		hidden_effect = {
			remove_ideas = CCP_socialism_with_chinese_characteristics_4
			add_ideas = CCP_socialism_with_chinese_characteristics_5
		}
	}
}

#more foreign investments
country_event = {
	id = CCP.19
	title = CCP.14.t
	desc = CCP.14.d
	picture = GFX_report_event_second_vienna_award_pact
	
	trigger = {
		tag = CCP
		focus_progress = {
			progress > 0.8
			focus = CCP_economic_reform
		}
	}
	
	fire_only_once = yes
	mean_time_to_happen = { days = 2 }
	
	option = {
		name = CCP.14.a
		random_owned_controlled_state = {
			limit = {
				free_building_slots = {
					building = industrial_complex
					size > 4
					include_locked = yes
				}
			}
			add_extra_state_shared_building_slots = 5
			add_building_construction = {
				type = industrial_complex
				level = 5
				instant_build = yes
			}
			add_building_construction = {
				type = infrastructure
				level = 4
				instant_build = yes
			}
		}
	}
}

#more foreign investments
country_event = {
	id = CCP.20
	title = CCP.14.t
	desc = CCP.14.d
	picture = GFX_report_event_second_vienna_award_pact
	
	trigger = {
		tag = CCP
		focus_progress = {
			progress > 0.9
			focus = CCP_economic_reform
		}
	}
	
	immediate = {
		every_other_country = {
			add_opinion_modifier = {
				target = CCP
				modifier = CCP_swcc_5
			}
		}
	}
	
	fire_only_once = yes
	
	mean_time_to_happen = { days = 2 }
	
	option = {
		name = CCP.14.a
		random_owned_controlled_state = {
			limit = {
				free_building_slots = {
					building = industrial_complex
					size > 2
					include_locked = yes
				}
			}
			add_extra_state_shared_building_slots = 3
			add_building_construction = {
				type = industrial_complex
				level = 3
				instant_build = yes
			}
			add_building_construction = {
				type = infrastructure
				level = 4
				instant_build = yes
			}
		}
		custom_effect_tooltip = CCP_more_trade_deals_and_construct_tt
		hidden_effect = {
			remove_ideas = CCP_socialism_with_chinese_characteristics_5
			add_ideas = CCP_socialism_with_chinese_characteristics_6
		}
	}
}

#reform effect
country_event = {
	id = CCP.21
	title = CCP.21.t
	desc = CCP.21.d
	picture = GFX_report_event_generic_sign_treaty1
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	immediate = {
		every_other_country = {
			add_opinion_modifier = {
				target = CCP
				modifier = CCP_swcc_6
			}
		}
	}
	
	option = {
		name = CCP.21.a
		custom_effect_tooltip = CCP_more_trade_deals_and_construct_tt
		add_research_slot = 2
		hidden_effect = {
			remove_ideas = CCP_socialism_with_chinese_characteristics_6
			add_ideas = CCP_socialism_with_chinese_characteristics_7
		}
	}
}

#dengxiaoping
country_event = {
	id = CCP.22
	title = CCP.22.t
	desc = CCP.22.d
	picture = GFX_report_event_crowd_in_prague
	
	trigger = {
		tag = CCP
		has_global_flag = lin_biao_dead
		has_global_flag = CR_ended
	}
	
	fire_only_once = yes
	
	mean_time_to_happen = { days = 100 }
	
	immediate = {
		hidden_effect = {
			retire_country_leader = yes
			create_country_leader = {
				name = "Deng Xiaoping"
				desc = "POLITICS_DENG_XIAO_PING_DESC"
				picture = "gfx/leaders/Asia/Portrait_Asia_Generic_communism.dds"
				expire = "1965.1.1"
				ideology = marxism
				traits = {
				}
			}
			set_country_flag = deng_xiao_ping
		}
	}
	
	option = {
		name = CCP.22.a
		effect_tooltip = {
			create_country_leader = {
				name = "Deng Xiaoping"
				ideology = marxism
			}
		}
	}
}

#linbiao
country_event = {
	id = CCP.23
	title = CCP.23.t
	desc = CCP.23.d
	picture = GFX_report_event_japanese_soldiers_02
	
	trigger = {
		tag = CCP
		has_global_flag = lin_biao_fled_to_soviet
		has_global_flag = CR_ended
	}
	
	fire_only_once = yes
	
	mean_time_to_happen = { days = 50 }
	
	immediate = {
		hidden_effect = {
			kill_country_leader = yes
			create_country_leader = {
				name = "Lin Biao"
				desc = "POLITICS_LIN_BIAO_DESC"
				picture = "gfx/leaders/kmt_mod/Lin_Biao_back.dds"
				expire = "1965.1.1"
				ideology = marxism
				traits = {
				}
			}
			create_field_marshal = {
					name = "Lin Biao"
					portrait_path = "gfx/leaders/kmt_mod/Lin_Biao_back.dds"
					traits = {  defensive_doctrine offensive_doctrine inspirational_leader logistics_wizard organisational_leader }
					skill = 3
					id = 1100
					attack_skill = 3
					defense_skill = 4
					planning_skill = 3
					logistics_skill = 2
			}
			set_country_flag = lin_biao
		}
	}
	
	option = {
		name = CCP.23.a
		effect_tooltip = {
			create_country_leader = {
				name = "Lin Biao"
				ideology = marxism
			}
		}
	}
}

#peace with xsm?
country_event = {
	id = CCP.24
	title = CCP.24.t
	desc = CCP.24.d
	picture = GFX_report_event_dead_soldiers
	
	trigger = {
		has_global_flag = west_expedition_started
		NOT = {
			has_global_flag = no_more_failed_event
		}
		tag = CCP
		has_offensive_war_with = XSM
		NOT = {
			CHI = {
				has_completed_focus = KMT_north_west_insurgence
			}
		}
		XSM = {
			surrender_progress < 0.35
		}
	}
	
	mean_time_to_happen = { days = 80 }
	
	option = {
		ai_chance = { factor = 90 }
		name = CCP.24.a
		white_peace = XSM 
	}
	
	option = {
		ai_chance = { factor = 10 }
		name = CCP.24.b
	}
}

#baiqiuen
country_event = {
	id = CCP.25
	title = CCP.25.t
	desc = CCP.25.d
	picture = GFX_report_event_chinese_soldiers_fighting
	
	trigger = {
		tag = CCP
		has_war_with = JAP
	}
	
	mean_time_to_happen = { days = 365 }
	
	fire_only_once = yes
	
	option = {
		name = CCP.25.a
		set_technology = { tech_support = 1 }
		if = {
			limit = {
				has_tech = tech_field_hospital
				NOT = {
					has_tech = tech_field_hospital2
				}
			}
			set_technology = { tech_field_hospital2 = 1 }
		}
		if = {
			limit = {
				NOT = {
					has_tech = tech_field_hospital
				}
			}
			set_technology = { tech_field_hospital = 1 }
		}
		add_equipment_to_stockpile = { type = support_equipment_1 amount = 500 producer = CCP }
	}
}

#[month] countercurrent #missing 1072
country_event = {
	id = CCP.26
	title = CCP.26.t
	desc = CCP.26.d
	picture = GFX_report_event_gathering_protest
	
	trigger = {
		tag = CCP
		has_war = no
		has_global_flag = CCP_cr_started
		NOT = {
			has_global_flag = CR_ended
		}
	}
	
	mean_time_to_happen = { days = 60 }
	
	fire_only_once = yes
	
	immediate = {
		hidden_effect = {
			remove_unit_leader = 1067
			remove_unit_leader = 1069
			set_country_flag = month_countercurrent
		}
	}
	
	option = {
		name = CCP.26.a
		effect_tooltip = {
			remove_unit_leader = 1067
			remove_unit_leader = 1069
		}
	}
}

##house arrested he long
#country_event = {
#	id = CCP.27
#	title = CCP.27.t
#	desc = CCP.27.d
#	picture = GFX_report_event_gathering_protest
#	
#	trigger = {
#		tag = CCP
#		has_war = no
#		has_country_flag = month_countercurrent
#		NOT = {
#			has_global_flag = CR_ended
#		}
#	}
#	
#	mean_time_to_happen = { days = 50 }
#	
#	fire_only_once = yes
#	
#	immediate = {
#		hidden_effect = {
#			remove_unit_leader = 1070
#			set_country_flag = helong_arrested
#		}
#	}
#	
#	
#	option = {
#		name = CCP.27.a
#		effect_tooltip = {
#			remove_unit_leader = 1070
#		}
#	}
#}

# arrested peng
country_event = {
	id = CCP.28
	title = CCP.28.t
	desc = CCP.28.d
	picture = GFX_report_event_gathering_protest
	
	trigger = {
		tag = CCP
		has_war = no
		has_country_flag = month_countercurrent
		NOT = {
			has_global_flag = CR_ended
		}
	}
	
	mean_time_to_happen = { days = 30 }
	
	fire_only_once = yes
	
	immediate = {
		hidden_effect = {
			remove_unit_leader = 1068
			set_country_flag = peng_arrested
		}
	}
	
	option = {
		name = CCP.28.a
		effect_tooltip = {
			remove_unit_leader = 1068
		}
	}
}

##demotednie
#country_event = {
#	id = CCP.29
#	title = CCP.29.t
#	desc = CCP.29.d
#	picture = GFX_report_event_gathering_protest
#	
#	trigger = {
#		tag = CCP
#		has_war = no
#		has_country_flag = month_countercurrent
#		NOT = {
#			has_global_flag = CR_ended
#		}
#	}
#	
#	mean_time_to_happen = { days = 75 }
#	
#	fire_only_once = yes
#	
#	immediate = {
#		hidden_effect = {
#			remove_unit_leader = 1073
#			set_country_flag = nie_arrested
#		}
#	}
#	
#	option = {
#		name = CCP.29.a
#		effect_tooltip = {
#			remove_unit_leader = 1073
#		}
#	}
#}

#sov power struggle ended
country_event = {
	id = CCP.30
	title = CCP.30.t
	desc = CCP.30.d
	picture = GFX_report_event_gathering_protest
	
	is_triggered_only = yes
	
	
	immediate = {
		hidden_effect = {
			kill_country_leader = yes
			if = {
				limit = {
					NOT = {
						has_country_flag = purged_khrushchev
					}
				}
				create_country_leader = {
					name = "Nikita Khrushchev"
					desc = "POLITICS_KHRUSCHEV_DESC"
					picture = "gfx/leaders/SOV/Portrait_Soviet_Generic_1.dds"
					expire = "1965.1.1"
					ideology = marxism
					traits = {
					}
				}
			}
			if = {
				limit = {
					has_country_flag = purged_khrushchev
				}
				create_country_leader = {
					name = "Lavrentiy Beria"
					desc = "POLITICS_BERIA_DESC"
					picture = "gfx/leaders/SOV/Portrait_Soviet_Generic_1.dds"
					expire = "1965.1.1"
					ideology = marxism
					traits = {
					}
				}
			}
		}
	}
	
	option = {
		name = CCP.30.a
		custom_effect_tooltip = sov_power_struggle_ends
		effect_tooltip = {
			if = {
				limit = {
					NOT = {
						has_country_flag = purged_khrushchev
					}
				}
				create_country_leader = {
					name = "Nikita Khrushchev"
					desc = "POLITICS_KHRUSCHEV_DESC"
					picture = "gfx/leaders/SOV/Portrait_Soviet_Generic_1.dds"
					expire = "1965.1.1"
					ideology = marxism
					traits = {
					}
				}
			}
			if = {
				limit = {
					has_country_flag = purged_khrushchev
				}
				create_country_leader = {
					name = "Lavrentiy Beria"
					desc = "POLITICS_BERIA_DESC"
					picture = "gfx/leaders/SOV/Portrait_Soviet_Generic_1.dds"
					expire = "1965.1.1"
					ideology = marxism
					traits = {
					}
				}
			}
		}
	}
}

#check for communism
country_event = {
	id = CCP.31
	hidden = yes
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	immediate = {
		hidden_effect = {
			if = {
				limit = {
					has_government = communism
				}
				country_event = { id = CCP.30 }
			}
		}
	}
	
	option = {
	}
}

#event for integration of government
country_event = {
	id = CCP.32
	title = CCP.32.t
	desc = CCP.32.d
	
	picture = GFX_report_event_generic_sign_treaty1
	
	is_triggered_only = yes
	
	option = {
		ai_chance = { factor = 100 }
		name = CCP.32.a
		CHI = {
			country_event = { id = CCP.33 }
		}
	}
	
	option = {
		name = CCP.32.b
		effect_tooltip = {
			CHI = {
				create_wargoal = {
					target = ROOT
					type = annex_everything
				}
			}
		}
		CHI = { country_event = { id = CCP.34 }}
		add_timed_idea = {
			days = 1000
			idea = CCP_defiant
		}
	}
}

#integrated - choose CCP or chi
country_event = {
	id = CCP.33
	title = CCP.33.t
	desc = CCP.33.d
	
	picture = GFX_report_event_generic_sign_treaty1
	
	is_triggered_only = yes
	option = {
		name = CCP.33.b
		ai_chance = { factor = 100 }
		CHI = {
			custom_effect_tooltip = kmt_integrate_mao_tt
			hidden_effect = {
				country_event = { id = kmt.38 }#turn communism
				every_state = {
					limit = {
						is_core_of = CCP
					}
					add_core_of = CHI
					remove_core_of = CCP
				}
				every_state = {
					limit = {
						is_claimed_by = CCP
					}
					CHI = {
						add_state_claim = PREV
					}
					CCP = {
						remove_state_claim = PREV
					}
				}
				if = {
					limit = {
						NOT = { has_global_flag = mao_dead } 
					}
					create_field_marshal = {
						name = "Mao Zedong"
						portrait_path = "gfx/leaders/CHI/Portrait_China_Mao_Zedong.dds"
						traits = { defensive_doctrine }
						skill = 3
							attack_skill = 2
						defense_skill = 3
						planning_skill = 2
						logistics_skill = 2
					}
				}
				if = {
					limit = {
						CCP = { NOT = { has_country_flag = month_countercurrent } }
					}
					create_corps_commander = {
						name = "Ye Jian Ying"
						portrait_path = "gfx/leaders/kmt_mod/Ye_Jian_Ying.dds"
						skill = 1
							attack_skill = 2
						defense_skill = 3
						planning_skill = 2
						logistics_skill = 2
					}
					create_corps_commander = {
						name = "Chen Yi"
						portrait_path = "gfx/leaders/kmt_mod/Chen_Yi.dds"
						skill = 1
							attack_skill = 2
						defense_skill = 3
						planning_skill = 2
						logistics_skill = 2
					}
					create_corps_commander = {
						name = "Xu Xiang Qian"
						portrait_path = "gfx/leaders/kmt_mod/Xv_Xiang_Qian.dds"
						skill = 1
							attack_skill = 2
						defense_skill = 3
						planning_skill = 2
						logistics_skill = 2
					}
				}
				if = {
					limit = {
						CCP = { NOT = { has_country_flag = helong_arrested } }
					}
					create_corps_commander = {
						name = "He Long"
						portrait_path = "gfx/leaders/kmt_mod/He_Long.dds"
						skill = 1
						attack_skill = 1
					defense_skill = 1
					planning_skill = 2
					logistics_skill = 2
					}
				}
				if = {
					limit = {
						CCP = { NOT = { has_country_flag = peng_arrested } }
					}
					create_corps_commander = {
						name = "Peng De Huai"
						portrait_path = "gfx/leaders/kmt_mod/Peng_De_Huai.dds"
						skill = 1
							attack_skill = 2
						defense_skill = 3
						planning_skill = 2
						logistics_skill = 2
					}
				}
				if = {
					limit = {
						CCP = { NOT = { has_country_flag = nie_arrested } }
					}
					create_corps_commander = {
						name = "Nie Rong Zhen"
						portrait_path = "gfx/leaders/kmt_mod/Nie_Rong_Z.dds"
						skill = 1
						attack_skill = 1
					defense_skill = 2
					planning_skill = 1
					logistics_skill = 1
					}
				}
				if = {
					limit = {
						CCP = { 
							NOT = { 
								OR = {
									has_country_flag = lin_biao_fled_to_soviet 
									has_country_flag = lin_biao_dead
								}
								has_country_flag = lin_biao
							} 
						}
					}
					create_corps_commander = {
						name = "Lin Biao"
						portrait_path = "gfx/leaders/kmt_mod/Lin_Biao.dds"
						traits = {  trickster }
						skill = 2
							attack_skill = 2
						defense_skill = 3
						planning_skill = 2
						logistics_skill = 2
					}
				}
				if = {
					limit = {
						CCP = { 
							has_country_flag = lin_biao
						}
					}
					create_field_marshal = {
					name = "Lin Biao"
					portrait_path = "gfx/leaders/kmt_mod/Lin_Biao_back.dds"
					traits = {  defensive_doctrine offensive_doctrine inspirational_leader logistics_wizard organisational_leader }
					skill = 3
						attack_skill = 2
						defense_skill = 3
						planning_skill = 2
						logistics_skill = 2
					}
				}


				create_corps_commander = {
					name = "Zhu De"
					portrait_path = "gfx/leaders/kmt_mod/Zhu_De.dds"
					skill = 3
						attack_skill = 2
						defense_skill = 3
						planning_skill = 2
						logistics_skill = 2
				}


				create_corps_commander = {
					name = "Liu Bo Cheng"
					portrait_path = "gfx/leaders/kmt_mod/Liu_Bo_Cheng.dds"
					skill = 1
					attack_skill = 1
					    defense_skill = 2
					    planning_skill = 1
					    logistics_skill = 2
				}

				create_corps_commander = {
					name = "Luo Rong Huan"
					portrait_path = "gfx/leaders/kmt_mod/Luo_Rong_Huan.dds"
					skill = 1
						attack_skill = 2
						defense_skill = 3
						planning_skill = 2
						logistics_skill = 2
				}
			}
			annex_country = {
				target = CCP
				transfer_troops = yes
			}
		}
	}
	
	option = {
		name = CCP.33.a
		CCP = {
			change_tag_from = CHI
			add_research_slot = 1
			drop_cosmetic_tag = yes
		}
		hidden_effect = {
			every_state = {
				limit = {
					is_core_of = CHI
				}
				add_core_of = CCP
				remove_core_of = CHI
			}
			every_state = {
				limit = {
					is_claimed_by = CHI
				}
				CCP = {
					add_state_claim = PREV
				}
				CHI = {
					remove_state_claim = PREV
				}
			}
			every_state = {
				limit = {
					is_core_of = CHI
				}
				add_core_of = CCP
				remove_core_of = CHI
			}
			CCP = {
				remove_ideas = CCP_defeatism_1
				remove_ideas = CCP_defeatism_2
				remove_ideas = CCP_underestimation
			}
			if = {
				limit = {
					CHI = {
						has_idea = KMT_propaganda
					}
				}
				CCP = {
					add_ideas = KMT_propaganda
				}
			}
			if = {
				limit = {
					CHI = {
						has_idea = KMT_science_funding
					}
				}
				CCP = {
					add_ideas = KMT_science_funding
				}
			}
			if = {
				limit = {
					CHI = {
						has_idea = KMT_national_institute_ns
					}
				}
				CCP = {
					add_ideas = KMT_national_institute_ns
				}
			}
			if = {
				limit = {
					CHI = {
						has_idea = KMT_into_mao
					}
				}
				CCP = {
					add_ideas = KMT_into_mao
				}
			}
			if = {
				limit = {
					CHI = {
						has_idea = KMT_privilege_to_proletarians_idea
					}
				}
				CCP = {
					add_ideas = KMT_privilege_to_proletarians_idea
				}
			}
			if = {
				limit = {
					CHI = {
						has_idea = KMT_rear
					}
				}
				CCP = {
					add_ideas = KMT_rear
				}
			}
			if = {
				limit = {
					CHI = {
						has_idea = KMT_warlord_cliques_pre_war
					}
				}
				CCP = {
					add_ideas = KMT_warlord_cliques_pre_war
				}
			}
			if = {
				limit = {
					CHI = {
						has_idea = KMT_warlord_cliques_3
					}
				}
				CCP = {
					add_ideas = KMT_warlord_cliques_3
				}
			}
			if = {
				limit = {
					CHI = {
						has_idea = KMT_warlord_cliques_2
					}
				}
				CCP = {
					add_ideas = KMT_warlord_cliques_2
				}
			}
			if = {
				limit = {
					CHI = {
						has_idea = KMT_warlord_cliques_1
					}
				}
				CCP = {
					add_ideas = KMT_warlord_cliques_1
				}
			}
			if = {
				limit = {
					CHI = {
						has_idea = KMT_warlord_cliques_war
					}
				}
				CCP = {
					add_ideas = KMT_warlord_cliques_war
				}
			}
			if = {
				limit = {
					CHI = {
						has_idea = KMT_lure_them_in
					}
				}
				CCP = {
					add_ideas = KMT_lure_them_in
				}
			}
			if = {
				limit = {
					CHI = {
						OR = {
							has_idea = incompetent_industry_real
						}
					}
				}
				CCP = {
					add_ideas = incompetent_industry_real
				}
			}
			if = {
				limit = {
					CHI = {
						has_idea = public_iliteracy
					}
					NOT = {
						CCP = {
							has_completed_focus = CCP_eliminate_iliteracy
						}
					}
				}
				CCP = {
					add_ideas = public_iliteracy
					remove_ideas = CCP_lack_skilled_personnel
					remove_ideas = CCP_lack_skilled_personnel_1
					remove_ideas = CCP_lack_skilled_personnel_2
					remove_ideas = CCP_lack_skilled_personnel_3
					remove_ideas = CCP_lack_skilled_personnel_4
					remove_ideas = CCP_lack_skilled_personnel_5
					remove_ideas = CCP_lack_skilled_personnel_6
					remove_ideas = CCP_lack_skilled_personnel_7
					remove_ideas = CCP_lack_skilled_personnel_8
					remove_ideas = CCP_lack_skilled_personnel_9
					remove_ideas = CCP_lack_skilled_personnel_10
				}
			}
			if = {
				limit = {
					CHI = {
						has_idea = public_iliteracy_2
					}
					NOT = {
						CCP = {
							has_completed_focus = CCP_eliminate_iliteracy
						}
					}
				}
				CCP = {
					add_ideas = public_iliteracy_2
					remove_ideas = CCP_lack_skilled_personnel
					remove_ideas = CCP_lack_skilled_personnel_1
					remove_ideas = CCP_lack_skilled_personnel_2
					remove_ideas = CCP_lack_skilled_personnel_3
					remove_ideas = CCP_lack_skilled_personnel_4
					remove_ideas = CCP_lack_skilled_personnel_5
					remove_ideas = CCP_lack_skilled_personnel_6
					remove_ideas = CCP_lack_skilled_personnel_7
					remove_ideas = CCP_lack_skilled_personnel_8
					remove_ideas = CCP_lack_skilled_personnel_9
					remove_ideas = CCP_lack_skilled_personnel_10
				}
			}
			if = {
				limit = {
					CHI = {
						has_idea = kmt_dare_to_die_corps_idea
					}
				}
				CCP = {
					add_ideas = kmt_dare_to_die_corps_idea
				}
			}
			if = {
				limit = {
					CHI = {
						has_idea = kmt_national_treasure_ransacked
					}
				}
				CCP = {
					add_ideas = kmt_national_treasure_ransacked
				}
			}
			if = {
				limit = {
					CHI = {
						has_idea = civilian_economy
					}
				}
				CCP = {
					add_ideas = civilian_economy
				}
			}
			if = {
				limit = {
					CHI = {
						has_idea = low_economic_mobilisation
					}
				}
				CCP = {
					add_ideas = low_economic_mobilisation
				}
			}
			if = {
				limit = {
					CHI = {
						has_idea = partial_economic_mobilisation
					}
				}
				CCP = {
					add_ideas = partial_economic_mobilisation
				}
			}
			if = {
				limit = {
					CHI = {
						has_idea = war_economy
					}
				}
				CCP = {
					add_ideas = war_economy
				}
			}
			if = {
				limit = {
					CHI = {
						has_idea = tot_economic_mobilisation
					}
				}
				CCP = {
					add_ideas = tot_economic_mobilisation
				}
			}
			if = {
				limit = {
					CHI = {
						has_idea = free_trade
					}
				}
				CCP = {
					add_ideas = free_trade
				}
			}
			if = {
				limit = {
					CHI = {
						has_idea = limited_exports
					}
				}
				CCP = {
					add_ideas = limited_exports
				}
			}
			if = {
				limit = {
					CHI = {
						has_idea = export_focus
					}
				}
				CCP = {
					add_ideas = export_focus
				}
			}
			if = {
				limit = {
					CHI = {
						has_idea = closed_economy
					}
				}
				CCP = {
					add_ideas = closed_economy
				}
			}
			if = {
				limit = {
					CHI = {
						has_idea = disarmed_nation
					}
				}
				CCP = {
					add_ideas = disarmed_nation
				}
			}
			if = {
				limit = {
					CHI = {
						has_idea = volunteer_only
					}
				}
				CCP = {
					add_ideas = volunteer_only
				}
			}
			if = {
				limit = {
					CHI = {
						has_idea = limited_conscription
					}
				}
				CCP = {
					add_ideas = limited_conscription
				}
			}
			if = {
				limit = {
					CHI = {
						has_idea = extensive_conscription
					}
				}
				CCP = {
					add_ideas = extensive_conscription
				}
			}
			if = {
				limit = {
					CHI = {
						has_idea = service_by_requirement
					}
				}
				CCP = {
					add_ideas = service_by_requirement
				}
			}
			if = {
				limit = {
					CHI = {
						has_idea = all_adults_serve
					}
				}
				CCP = {
					add_ideas = all_adults_serve
				}
			}
			if = {
				limit = {
					CHI = {
						has_idea = scraping_the_barrel
					}
				}
				CCP = {
					add_ideas = scraping_the_barrel
				}
			}
		}
		CCP = {
			annex_country = {
				target = CHI
				transfer_troops = yes
			}
			set_country_flag = CCP_nation_founded
			if = {
				limit = {
					has_war = no
				}
				add_ideas = partial_economic_mobilisation
			}
			if = {
				limit = {
					has_war = yes
				}
				add_ideas = war_economy
			}
			add_ideas = service_by_requirement
			add_ideas = limited_exports
			set_rule = {
				can_send_volunteers = yes
				can_puppet = yes
			}
		}
		set_global_flag = CCP_annex_chi_integration
		custom_effect_tooltip = CCP_no_generals_transfer
	}
}

#fuck china
country_event = {
	id = CCP.34
	title = CCP.34.t
	desc = CCP.34.d
	
	is_triggered_only = yes
	picture = GFX_report_event_generic_sign_treaty1
	
	option = {
		name = CCP.34.a
		create_wargoal = {
			target = CCP
			type = annex_everything
		}
	}
}

#remove long march after oct.28
country_event = {
	id = CCP.35
	hidden = yes
	
	fire_only_once = yes
	
	trigger = {
		tag = CCP
		date > 1936.10.28
		has_idea = CCP_devastating_long_march_1
	}
	
	mean_time_to_happen = { days = 1 }
	
	immediate = {
		remove_ideas = CCP_devastating_long_march_1
	}
	option = {}
}

#sov response for march sik
country_event = {
	id = CCP.36
	title = CCP.36.t
	desc = CCP.36.d
	
	picture = GFX_report_event_chinese_soldiers_fighting
	
	is_triggered_only = yes
	
	option = {
		ai_chance = { factor = 95 }
		name = CCP.36.a
		SIK = {
			country_event = { id = CCP.37 }
		}
	}
	
	option = {
		ai_chance = { factor = 5 }
		name = CCP.36.b
		CCP = {
			country_event = { id = CCP.38 }
		}
	}
	
	option = {
		ai_chance = { factor = 0 }
		name = CCP.36.c
		hidden_effect = {
			CCP = {
				create_wargoal = {
					target = SIK
					type = annex_everything 
				}
			}
		}
	}	
}

#sov demand sik cooperate
country_event = {
	id = CCP.37
	title = CCP.37.t
	desc = CCP.37.d
	
	picture = GFX_report_event_chinese_soldiers_fighting
	
	is_triggered_only = yes
	
	option = {
		ai_chance = { factor = 95 }
		name = CCP.37.a
		CCP = {
			annex_country = {
				target = SIK 
				transfer_troops = yes
			}
			country_event = { id = CCP.39 }
		}
	}
	
	option = {
		ai_chance = { factor = 5 }
		name = CCP.37.b
		SOV = {
			country_event = { id = CCP.40 }
		}
		CCP = {
			create_wargoal = {
				target = SIK
				type = annex_everything 
			}
		}
	}	
}

#sov demand CCP stop
country_event = {
	id = CCP.38
	title = CCP.37.t
	desc = CCP.38.d
	
	picture = GFX_report_event_chinese_soldiers_fighting
	
	is_triggered_only = yes
	
	option = {
		ai_chance = { factor = 35 }
		name = CCP.38.a
		if = {
			limit = {
				CCP = {
					is_in_faction_with = SOV
				}
			}
			SOV = {
				remove_from_faction = CCP
			}
		}
		CCP = {
			create_wargoal = {
				target = SIK
				type = annex_everything 
			}
		}
		SOV = { country_event = { id = CCP.41 }}
	}
	
	option = {
		ai_chance = { factor = 65 }
		name = CCP.38.b
		add_political_power = -50
		SOV = { country_event = { id = CCP.42 }}
	}
}

#sov intervened sik annexed
country_event = {
	id = CCP.39
	title = CCP.39.t
	desc = CCP.39.d
	
	picture = GFX_report_event_chinese_soldiers_fighting
	
	is_triggered_only = yes
	
	option = {
		name = CCP.39.a
		effect_tooltip = {
			annex_country = {
				target = SIK
				transfer_troops = yes
			}
		}
	}
}

#sov intervened sik says no
country_event = {
	id = CCP.40
	title = CCP.40.t
	desc = CCP.40.d
	
	picture = GFX_report_event_chinese_soldiers_fighting
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			remove_from_faction = SIK
			add_ai_strategy = {
				id = "SIK"
				type = alliance
				value = -1000
			}
			SIK = {
				add_ai_strategy = {
					id = "SOV"
					type = alliance
					value = -1000
				}
			}
		}
	}
	
	option = {
		name = CCP.40.a
		effect_tooltip = {
			remove_from_faction = SIK
		}
		add_political_power = -10
		add_opinion_modifier = { modifier = sik_no_coop target = SIK }
		SIK = {
			add_opinion_modifier = { modifier = sik_no_coop target = SOV }
		}
		CCP = {
			country_event = {
				id = CCP.43
			}
		}
	}
}

#sov intervened CCP says no
country_event = {
	id = CCP.41
	title = CCP.41.t
	desc = CCP.41.d
	
	picture = GFX_report_event_chinese_soldiers_fighting
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			remove_from_faction = CCP
			add_ai_strategy = {
				id = "CCP"
				type = alliance
				value = -1000
			}
			CCP = {
				add_ai_strategy = {
					id = "SOV"
					type = alliance
					value = -1000
				}
			}
		}
	}
	
	option = {
		name = CCP.40.a
		effect_tooltip = {
			remove_from_faction = CCP
		}
		add_political_power = -10
		add_opinion_modifier = { modifier = CCP_no_coop target = CCP }
		CCP = {
			add_opinion_modifier = { modifier = CCP_no_coop target = SOV }
		}
		SIK = {
			country_event = {
				id = CCP.44
			}
		}
	}
}

#sov intervened CCP ok
country_event = {
	id = CCP.42
	title = CCP.42.t
	desc = CCP.42.d
	
	picture = GFX_report_event_chinese_soldiers_fighting
	
	is_triggered_only = yes
	
	option = {
		name = CCP.42.a
	}
}

#sik no coop sov reinforcement
country_event = {
	id = CCP.43
	title = CCP.43.t
	desc = CCP.43.d
	
	picture = GFX_report_event_chinese_soldiers_fighting
	
	is_triggered_only = yes
	
	option = {
		name = CCP.43.a
		custom_effect_tooltip = CCP_sov_reinforcements
		hidden_effect = {
			load_oob = "CCP_sov_antisik_reinforcement"
		}
		add_equipment_to_stockpile = { type = infantry_equipment_1 amount = 8000 producer = SOV }
	}
}

#CCP no coop sov reinforcement
country_event = {
	id = CCP.44
	title = CCP.43.t
	desc = CCP.44.d
	
	picture = GFX_report_event_chinese_soldiers_fighting
	
	is_triggered_only = yes
	
	option = {
		name = CCP.43.a
		custom_effect_tooltip = CCP_sov_reinforcements
		hidden_effect = {
			load_oob = "CCP_sov_antiCCP_reinforcement"
		}
		add_equipment_to_stockpile = { type = infantry_equipment_1 amount = 8000 producer = SOV }
	}
}

#assassination of mao
country_event = {
	id = CCP.45
	hidden = yes
	
	trigger = {
		tag = CCP
		has_global_flag = CCP_cr_started
		NOT = {
			has_global_flag = mao_dead
		}
	}
	
	mean_time_to_happen = { days = 100 }
	
	fire_only_once = yes
	
	immediate = {
		set_global_flag = mao_assassin_event_fired
		random_list = {
			95 = {
				country_event = { id = CCP.47 }
			}
			5 = {
				country_event = { id = CCP.46 }
			}
		}
	}
	option = {}
}

#assassination of mao - success
country_event = {
	id = CCP.46
	title = CCP.46.t
	desc = CCP.46.d
	
	picture = GFX_report_event_chinese_soldiers_fighting
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			kill_country_leader = yes
			create_country_leader = {
				name = "Lin Biao"
				desc = "POLITICS_LIN_BIAO_DESC"
				picture = "gfx/leaders/kmt_mod/Lin_Biao_back.dds"
				expire = "1965.1.1"
				ideology = marxism
				traits = {
				}
			}
			create_field_marshal = {
					name = "Lin Biao"
					portrait_path = "gfx/leaders/kmt_mod/Lin_Biao_back.dds"
					traits = {  defensive_doctrine offensive_doctrine inspirational_leader logistics_wizard organisational_leader }
					skill = 3
						attack_skill = 2
						defense_skill = 3
						planning_skill = 2
						logistics_skill = 2
					id = 1100
			}
			set_country_flag = lin_biao
			set_country_flag = mao_assassinated
			add_stability = -0.1
			hidden_effect = {
				add_political_power = 500
				add_manpower = -1750000
				remove_ideas = CCP_cultural_revolution
				add_timed_idea = {
					idea = CCP_cultural_revolution_aftermath
					days = 600
				}
				set_global_flag = CR_ended
			}
		}
	}
	
	option = {
		name = CCP.46.a
		effect_tooltip = {
			create_country_leader = {
				name = "Lin Biao"
				ideology = marxism
			}
			hidden_effect = {
				add_political_power = 500
				add_manpower = -5750000
				remove_ideas = CCP_cultural_revolution
				add_timed_idea = {
					idea = CCP_cultural_revolution_aftermath
					days = 600
				}
			}
		}
	}
}

#assassination of mao - failed
country_event = {
	id = CCP.47
	title = CCP.47.t
	desc = CCP.47.d
	
	picture = GFX_report_event_chinese_soldiers_fighting
	
	is_triggered_only = yes
	
	option = {
		name = CCP.47.a
	}
}


#soviet assisstance
country_event = {
	id = CCP.48
	title = CCP.48.t
	desc = CCP.48.d
	picture = GFX_report_event_chinese_soldiers_fighting
	
	trigger = {
		tag = CHI
		has_defensive_war_with = JAP
		SOV = {
			has_government = communism
		}
		NOT = {
			has_country_flag = sov_supported
		}
	}
	
	mean_time_to_happen = { days = 365 }
	
	immediate = {
		hidden_effect = {
			if = {
				limit = {
					NOT = {
						has_tech = tech_support
					}
				}
				set_technology = { tech_support = 1 }
			}
			if = {
				limit = {
					NOT = {
						has_tech = hmg
					}
				}
				set_technology = { hmg = 1 }
			}
			add_equipment_to_stockpile = { type = infantry_equipment_0 amount = 2500 producer = SOV }
			set_country_flag = sov_supported
		}
	}
	
	option = {
		name = CCP.48.a
		effect_tooltip = {
			set_technology = { tech_support = 1 }
			set_technology = { hmg = 1 }
			add_equipment_to_stockpile = { type = infantry_equipment_0 amount = 2500 producer = SOV }
		}
	}
}


#dongbei partisans
country_event = {
	id = CCP.49
	title = CCP.49.t
	desc = CCP.49.d
	picture = GFX_report_event_chinese_soldiers_fighting
	
	trigger = {
		tag = CCP
		has_war_with = CHI
		has_global_flag = CCP_civil_war_started
		717 = { 
			owner = {
				OR = {
					tag = CHI
					tag = CCP
				}
			}
		}
		328 = { 
			owner = {
				OR = {
					tag = CHI
					tag = CCP
				}
			}
		}
		716 = { 
			owner = {
				OR = {
					tag = CHI
					tag = CCP
				}
			}
		}
		714 = { 
			owner = {
				OR = {
					tag = CHI
					tag = CCP
				}
			}
		}
		715 = { 
			owner = {
				OR = {
					tag = CHI
					tag = CCP
				}
			}
		}
		610 = { 
			owner = {
				OR = {
					tag = CHI
					tag = CCP
				}
			}
		}
		611 = { 
			owner = {
				OR = {
					tag = CHI
					tag = CCP
				}
			}
		}
		612 = { 
			owner = {
				OR = {
					tag = CHI
					tag = CCP
				}
			}
		}
		750 = { 
			owner = {
				OR = {
					tag = CHI
					tag = CCP
				}
			}
		}
	}
	
	mean_time_to_happen = { days = 30 }
	
	fire_only_once = yes
	
	immediate = {
		hidden_effect = {
			set_technology = { tech_support = 1}
			every_state = {
				limit = {
					OR = {
						is_owned_by = CHI
					}
					OR = {
						region = 155
						state = 612
						state = 611
						state = 610
					}
				}
				CCP = {
					set_state_controller = PREV
				}
			}
			load_oob = "CCP_dongbei_partisans"
		}
	}
	
	option = {
		name = CCP.49.a
		custom_effect_tooltip = CCP_dongbei_partisans_tt
	}
}

#some nra defects
country_event = {
	id = CCP.50
	title = CCP.50.t
	desc = CCP.50.d
	picture = GFX_report_event_chinese_soldiers_fighting
	
	trigger = {
		tag = CCP
		has_war_with = CHI
		has_global_flag = CCP_civil_war_started
		OR = {
			controls_state = 603
			controls_state = 802
		}
		CHI = {
			has_idea = KMT_harsh_takeover
		}
	}
	
	mean_time_to_happen = { days = 75 }
	
	fire_only_once = yes
	
	immediate = {
		hidden_effect = {
			if = {
				limit = {
					controls_state = 603
				}
				load_oob = "CCP_nra_defect_beijing"
			}
			if = {
				limit = {
					controls_state = 802
				}
				load_oob = "CCP_nra_defect_yanan"
			}
		}
	}
	
	option = {
		name = CCP.50.a
	}
}

#inspiring victory
country_event = {
	id = CCP.51
	title = CCP.51.t
	desc = CCP.51.d
	picture = GFX_report_event_chinese_officers
	
	trigger = {
		tag = CCP
		has_war_with = CHI
		has_global_flag = CCP_civil_war_started
		surrender_progress < 0.01
		CHI = {
			surrender_progress > 0
		}
	}
	
	mean_time_to_happen = { days = 5 }
	
	fire_only_once = yes
	
	immediate = {
		hidden_effect = {
			add_timed_idea = {
				days = 3700
				idea = CCP_inspiring_victory
			}
		}
	}
	
	option = {
		name = CCP.51.a
		effect_tooltip = {
			add_timed_idea = {
				days = 3700
				idea = CCP_inspiring_victory
			}
		}
	}
}

#create partisans
country_event = {
	id = CCP.52
	hidden = yes
	
	trigger = {
		any_state = {
			controller = {
				has_war_with = ROOT
				has_idea = CCP_enemy_partisan
			}
			is_core_of = ROOT
		}
		has_idea = CCP_create_partisan
		tag = CCP
	}
	
	is_triggered_only = yes
	
	immediate = {
		random_state = {
			limit = {
				controller = {
					has_war_with = ROOT
					has_idea = CCP_enemy_partisan
				}
				is_core_of = ROOT
			}
			create_unit = { 
				division = "name = \"You Ji Dui\" division_template = \"You Ji Dui\" start_experience_factor = 0.25" 
				owner = CCP
			}
		}
		random_state = {
			limit = {
				controller = {
					has_war_with = ROOT
					has_idea = CCP_enemy_partisan
				}
				is_core_of = ROOT
			}
			create_unit = { 
				division = "name = \"You Ji Dui\" division_template = \"You Ji Dui\" start_experience_factor = 0.25" 
				owner = CCP
			}
		}
		country_event = { id = CCP.52 days = 30 }
	}
	
	option = {
	}
}

#set flag no more fail west expedition
country_event = {
	id = CCP.53
	hidden = yes
	
	trigger = {
		has_global_flag = west_expedition_started
		OR = {
			CCP = {
				NOT = {
					has_war_with = XSM
				}
			}
			AND = {
				CCP = {
					is_in_faction = yes
				}
				any_country = {
					is_in_faction_with = CCP
					has_war_with = XSM
					has_war_together_with = CCP
				}
			}
			AND = {
				XSM = {
					is_in_faction = yes
				}
				any_country = {
					is_in_faction_with = XSM
					has_war_with = CCP
					has_war_together_with = XSM
				}
			}
		}
	}
	
	mean_time_to_happen = { days = 2 }
	
	immediate = {
		set_global_flag = no_more_failed_event
	}
	
	option = {
	}
}

#CCP proposal for grand northwest united
country_event = {
	id = CCP.54
	title = CCP.54.t
	desc = CCP.54.d
	
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes
	
	option = {
		ai_chance = {
			factor = 100
			modifier = {
				is_historical_focus_on = no
				factor = 50
			}
		}
		name = CCP.54.a
		CCP = {
			country_event = { id = CCP.59 }
		}
	}
	
	option = {
		ai_chance = {
			factor = 0
			modifier = {
				is_historical_focus_on = no
				factor = 50
			}
		}
		name = CCP.54.b
		CCP = {
			country_event = { id = CCP.60 }
		}
		set_global_flag = CCP_sov_approve
	}
}

#deal with zhang xue liang
country_event = {
	id = CCP.55
	title = CCP.55.t
	desc = CCP.55.d
	
	picture = GFX_report_event_chinese_soldiers_02
	
	is_triggered_only = yes
	
	option = {
		name = CCP.55.a
		add_political_power = -350
		add_stability = -0.2
		CHI = {
			country_event = { id = CCP.56 }
		}
		set_global_flag = zxl_assassinated
	}
	
	option = {
		name = CCP.55.b
		add_political_power = -200
		add_stability = -0.05
		custom_effect_tooltip = CCP_zxl_will_become_leader_if_agree
		custom_effect_tooltip = CCP_no_wargoal_to_chi_when_ok_tt
		set_global_flag = CCP_no_wargoal_to_chi_when_ok
		random_list = {
			80 = {
				country_event = { id = CCP.57 }
			}
			20 = {
				country_event = { id = CCP.58 }
			}
		}
	}
	
	option = {
		name = CCP.55.c
		add_political_power = -150
		custom_effect_tooltip = CCP_zxl_will_become_leader_if_agree
		random_list = {
			40 = {
				country_event = { id = CCP.57 }
			}
			60 = {
				country_event = { id = CCP.58 }
			}
		}
	}
	
	option = {
		name = CCP.55.e
		custom_effect_tooltip = CCP_zxl_will_become_leader_if_agree
		random_list = {
			10 = {
				country_event = { id = CCP.57 }
			}
			90 = {
				country_event = { id = CCP.58 }
			}
		}
	}
}

#zhang xueliang dead
country_event = {
	id = CCP.56
	title = CCP.56.t
	desc = CCP.56.d
	
	picture = GFX_report_event_chinese_soldiers_02
	
	is_triggered_only = yes
	
	option = {
		ai_chance = { factor = 100 }
		name = CCP.56.a
	}
	
	option = {
		ai_chance = { factor = 0 }
		name = CCP.56.b
		trigger = {
			has_completed_focus = KMT_internal_stability
		}
		create_wargoal = {
			target = CCP
			type = annex_everything
		}
	}
}

#zhang xueliang agree to join the grand northwest united
country_event = {
	id = CCP.57
	title = CCP.57.t
	desc = CCP.57.d
	
	picture = GFX_report_event_chinese_army_training
	
	is_triggered_only = yes
	
	immediate = {
		set_global_flag = zxl_as_gnwu_leader
		if = {
			limit = {
				has_global_flag = CCP_no_wargoal_to_chi_when_ok
			}
			set_global_flag = CCP_no_wargoal_to_chi_with_gnwu
		}
		if = {
			limit = {
				has_completed_focus = CCP_west_expedition
				XSM = {
					exists = yes
					NOT = {
						is_puppet_of = ROOT
					}
				}
			}
			if = {
				limit = {
					XSM = {
						is_puppet = yes
					}
				}
				XSM = {
					overlord = {
						save_event_target_as = CCP_overlord_of_xsm
					}
				}
				create_wargoal = {
					target = event_target:CCP_overlord_of_xsm
					type = take_state_focus
					generator = {283}
				}
				else = {
					create_wargoal = {
						target = XSM
						type = annex_everything
					}
				}
			}
		}
	}
	
	option = {
		name = CCP.57.a
	}
}

#zhang xueliang refuse to join the grand northwest united
country_event = {
	id = CCP.58
	title = CCP.58.t
	desc = CCP.58.d
	
	picture = GFX_report_event_chinese_soldiers_02
	
	is_triggered_only = yes
	
	option = {
		name = CCP.58.a
	}
}

#sov says no to grand northwest united
country_event = {
	id = CCP.59
	title = CCP.59.t
	desc = CCP.59.d
	
	picture = GFX_report_event_stalin_propaganda
	
	is_triggered_only = yes
	
	option = {
		ai_chance = {
			factor = 30
		}
		name = CCP.59.a
		set_global_flag = CCP_defy_sov_order
		SOV = {
			country_event = { id = CCP.61 }
			add_opinion_modifier = {
				target = CCP
				modifier = CCP_defy_order
			}
			add_opinion_modifier = {
				target = CCP
				modifier = CCP_defy_order_2
			}
		}
	}
	
	option = {
		ai_chance = {
			factor = 70
		}
		add_political_power = -10
		name = CCP.59.b
	}
}

#sov says ok to grand northwest united
country_event = {
	id = CCP.60
	title = CCP.60.t
	desc = CCP.60.d
	
	picture = GFX_report_event_stalin_propaganda
	
	is_triggered_only = yes
	
	option = {
		name = CCP.60.a
	}
}

#CCP defy our order
country_event = {
	id = CCP.61
	title = CCP.61.t
	desc = CCP.61.d
	
	picture = GFX_report_event_stalin_01
	
	is_triggered_only = yes
	
	option = {
		name = CCP.61.a
		effect_tooltip = {
			add_opinion_modifier = {
				target = CCP
				modifier = CCP_defy_order
			}
		}
	}
}

#mao arrested
country_event = {
	id = CCP.62
	title = CCP.62.t
	desc = CCP.62.d
	
	picture = GFX_report_event_dead_soldiers
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			set_country_flag = CCP_zxl_purge
			clr_country_flag = CCP_enable_cdx
			add_political_power = 150
			add_stability = -0.1
			remove_unit_leader = 1064
			remove_unit_leader = 1065
			remove_unit_leader = 1066
			remove_unit_leader = 1067
			remove_unit_leader = 1068
			remove_unit_leader = 1069
			remove_unit_leader = 1071
			add_popularity = {
				ideology = fascism
				popularity = 0.15
			}
			add_popularity = {
				ideology = communism
				popularity = -0.55
			}
			set_politics = {
				ruling_party = fascism
			}
		}
	}
	
	option = {
		name = CCP.62.a
		effect_tooltip = {
			add_political_power = 150
			add_stability = -0.1
			remove_unit_leader = 1064
			remove_unit_leader = 1065
			remove_unit_leader = 1066
			remove_unit_leader = 1067
			remove_unit_leader = 1068
			remove_unit_leader = 1069
			remove_unit_leader = 1071
			add_popularity = {
				ideology = fascism
				popularity = 0.15
			}
			add_popularity = {
				ideology = communism
				popularity = -0.55
			}
			set_politics = {
				ruling_party = fascism
			}
		}
	}
}

#hidden commies
country_event = {
	id = CCP.63
	title = CCP.63.t
	desc = CCP.63.d
	
	picture = GFX_report_event_chinese_officers
	
	trigger = {
		tag = CCP
		focus_progress = {
			focus = CCP_destroy_mao_and_his_clique
			progress > 0.25
		}
	}
	
	fire_only_once = yes
	
	option = {
		name = CCP.63.a
		add_political_power = 250
		add_stability = -0.05
			add_popularity = {
				ideology = fascism
				popularity = 0.15
			}
	}
	
	option = {
		name = CCP.63.b
		add_political_power = 120
			add_popularity = {
				ideology = fascism
				popularity = 0.05
			}
	}
}

#commie guerillas
country_event = {
	id = CCP.64
	title = CCP.64.t
	desc = CCP.64.d
	
	picture = GFX_report_event_chinese_soldiers_fighting
	
	trigger = {
		tag = CCP
		focus_progress = {
			focus = CCP_destroy_mao_and_his_clique
			progress > 0.5
		}
	}
	
	fire_only_once = yes
	
	option = {
		name = CCP.64.a
		add_political_power = 150
		add_manpower = -7500
		army_experience = 50
			add_popularity = {
				ideology = fascism
				popularity = 0.1
			}
			add_popularity = {
				ideology = communism
				popularity = -0.1
			}
	}
	
	option = {
		name = CCP.64.b
		add_political_power = 50
		custom_effect_tooltip = CCP_random_amount_of_partisan_tt
		hidden_effect = {
			division_template = {
				name = "You Ji Dui"
				regiments = {
					militia = { x = 0 y = 0 }
					militia = { x = 0 y = 1 } 
					militia = { x = 0 y = 2 } 
				}
			}
			random_list = {
				20 = {
					random_owned_controlled_state = {
						prioritize = { 283 }
						create_unit = { 
							division = "name = \"Di Xia You Ji Dui\" division_template = \"You Ji Dui\" start_experience_factor = 0.25" 
							owner = CCP
						}
						create_unit = { 
							division = "name = \"Di Xia You Ji Dui\" division_template = \"You Ji Dui\" start_experience_factor = 0.25" 
							owner = CCP
						}
					}
				}
				20 = {
					random_owned_controlled_state = {
						prioritize = { 283 }
						create_unit = { 
							division = "name = \"Di Xia You Ji Dui\" division_template = \"You Ji Dui\" start_experience_factor = 0.25" 
							owner = CCP
						}
						create_unit = { 
							division = "name = \"Di Xia You Ji Dui\" division_template = \"You Ji Dui\" start_experience_factor = 0.25" 
							owner = CCP
						}
						create_unit = { 
							division = "name = \"Di Xia You Ji Dui\" division_template = \"You Ji Dui\" start_experience_factor = 0.25" 
							owner = CCP
						}
					}
				}
				20 = {
					random_owned_controlled_state = {
						prioritize = { 283 }
						create_unit = { 
							division = "name = \"Di Xia You Ji Dui\" division_template = \"You Ji Dui\" start_experience_factor = 0.25" 
							owner = CCP
						}
						create_unit = { 
							division = "name = \"Di Xia You Ji Dui\" division_template = \"You Ji Dui\" start_experience_factor = 0.25" 
							owner = CCP
						}
						create_unit = { 
							division = "name = \"Di Xia You Ji Dui\" division_template = \"You Ji Dui\" start_experience_factor = 0.25" 
							owner = CCP
						}
						create_unit = { 
							division = "name = \"Di Xia You Ji Dui\" division_template = \"You Ji Dui\" start_experience_factor = 0.25" 
							owner = CCP
						}
					}
				}
				20 = {
					random_owned_controlled_state = {
						prioritize = { 283 }
						create_unit = { 
							division = "name = \"Di Xia You Ji Dui\" division_template = \"You Ji Dui\" start_experience_factor = 0.25" 
							owner = CCP
						}
						create_unit = { 
							division = "name = \"Di Xia You Ji Dui\" division_template = \"You Ji Dui\" start_experience_factor = 0.25" 
							owner = CCP
						}
						create_unit = { 
							division = "name = \"Di Xia You Ji Dui\" division_template = \"You Ji Dui\" start_experience_factor = 0.25" 
							owner = CCP
						}
						create_unit = { 
							division = "name = \"Di Xia You Ji Dui\" division_template = \"You Ji Dui\" start_experience_factor = 0.25" 
							owner = CCP
						}
						create_unit = { 
							division = "name = \"Di Xia You Ji Dui\" division_template = \"You Ji Dui\" start_experience_factor = 0.25" 
							owner = CCP
						}
					}
				}
				20 = {
					random_owned_controlled_state = {
						prioritize = { 283 }
						create_unit = { 
							division = "name = \"Di Xia You Ji Dui\" division_template = \"You Ji Dui\" start_experience_factor = 0.25" 
							owner = CCP
						}
						create_unit = { 
							division = "name = \"Di Xia You Ji Dui\" division_template = \"You Ji Dui\" start_experience_factor = 0.25" 
							owner = CCP
						}
						create_unit = { 
							division = "name = \"Di Xia You Ji Dui\" division_template = \"You Ji Dui\" start_experience_factor = 0.25" 
							owner = CCP
						}
						create_unit = { 
							division = "name = \"Di Xia You Ji Dui\" division_template = \"You Ji Dui\" start_experience_factor = 0.25" 
							owner = CCP
						}
						create_unit = { 
							division = "name = \"Di Xia You Ji Dui\" division_template = \"You Ji Dui\" start_experience_factor = 0.25" 
							owner = CCP
						}
						create_unit = { 
							division = "name = \"Di Xia You Ji Dui\" division_template = \"You Ji Dui\" start_experience_factor = 0.25" 
							owner = CCP
						}
					}
				}
			}
		}
	}
}

#establish secret police?
country_event = {
	id = CCP.65
	title = CCP.65.t
	desc = CCP.65.d
	
	picture = GFX_report_event_chinese_soldiers_02
	
	trigger = {
		tag = CCP
		focus_progress = {
			focus = CCP_destroy_mao_and_his_clique
			progress > 0.75
		}
	}
	
	fire_only_once = yes
	
	option = {
		name = CCP.65.a
		add_ideas = CCP_secret_police
	}
	
	option = {
		name = CCP.65.b
	}
}

#chen du xiu
country_event = {
	id = CCP.66
	title = CCP.66.t
	desc = CCP.66.d
	
	picture = GFX_report_event_soviet_purge_speech
	
	trigger = {
		tag = CCP
		SOV = {
			has_country_flag = counter_purge
			has_government = communism
		}
		has_government = communism
		NOT = {
			has_country_flag = CCP_zxl_purge
		}
	}
	
	mean_time_to_happen = { days = 5 }
	
	fire_only_once = yes
	
	option = {
		name = CCP.66.a
		if = {
			limit = {
				NOT = {
					has_country_leader = {
						name = "Zhang Xueliang"
						ruling_only = yes
					}
				}
			}
			kill_country_leader = yes
			create_country_leader = {
				name = "Chen Duxiu"
				desc = "POLITICS_CHEN_DUXIU_DESC"
				picture = "gfx/leaders/kmt_mod/Portrait_Chen_Duxiu.dds"
				expire = "1965.1.1"
				ideology = leninism
				traits = {
					CCP_trotskyist
				}
			}
			else = {
				set_country_flag = CCP_enable_cdx
				custom_effect_tooltip = available_political_advisor
				show_ideas_tooltip = CCP_chen_duxiu
			}
		}
		set_country_flag = cdx_returned
		remove_unit_leader = 1064
	}
	
	option = {
		ai_chance = {
			factor = 100
		}
		name = CCP.66.b
		add_opinion_modifier = { 
			target = SOV
			modifier = trostkyism_vermin
		}
	}
}

#from invite us - shx
country_event = {
	id = CCP.67
	title = CCP.67.t
	desc = CCP.67.d
	
	picture = GFX_report_event_generic_sign_treaty1
	
	is_triggered_only = yes
	
	option = {
		ai_chance = {
			factor = 50
			modifier = {
				ROOT = { tag = CHI }
				factor = 1
			}
		}
		name = CCP.67.a
		FROM = {
			country_event = { id = CCP.68 }
			transfer_state = 621
		}
		random_owned_controlled_state = {
			limit = { 
				free_building_slots = {
					building = arms_factory
					size > 0
					include_locked = yes
				}
			}
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}							
		}
		add_tech_bonus = {
			bonus = 0.15
			uses = 1
			category = industry
		}
	}
	
	option = {
		ai_chance = {
			factor = 50
		}
		name = CCP.67.b
		FROM = {
			country_event = { id = CCP.69 }
			create_wargoal = {
				target = ROOT
				type = take_state_focus
				generator = {621}
			}
		}
	}
}

#shx joins
country_event = {
	id = CCP.68
	title = CCP.68.t
	desc = CCP.68.d
	
	picture = GFX_report_event_generic_sign_treaty1
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	option = {
		name = CCP.68.a
		effect_tooltip = {
			puppet = FROM
			transfer_state = 621
		}
	}
}

#shx refuses
country_event = {
	id = CCP.69
	title = CCP.69.t
	desc = CCP.69.d
	
	picture = GFX_report_event_generic_sign_treaty1
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	option = {
		name = CCP.69.a
		effect_tooltip = {
			create_wargoal = {
				target = FROM
				type = take_state_focus
				generator = {621}
			}
		}
	}
}

#xu lanzhou
country_event = {
	id = CCP.70
	title = CCP.70.t
	desc = CCP.70.d
	
	picture = GFX_report_event_chinese_officers
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	option = {
		name = CCP.70.a
		
		add_stability = 0.05
		add_political_power = 150
	}
	
	option = {
		name = CCP.70.b
		set_country_flag = CCP_enable_xlz
		custom_effect_tooltip = available_military_high_command
		show_ideas_tooltip = CCP_xu_lanzhou
	}
}

#nwndg seek alliance against jap
country_event = {
	id = CCP.71
	title = CCP.71.t
	desc = CCP.71.d
	
	picture = GFX_report_event_generic_sign_treaty2
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	option = {
		name = CCP.71.a
		ai_chance = { 
			factor = 90
			modifier = {
				factor = 0
				NOT = {
					has_global_flag = CCP_yes_truce
					is_in_faction_with = CCP
				}
				CCP = { has_government = communism }
			}
			modifier = {
				factor = 100
				is_in_faction_with = FROM
			}
		}
		set_global_flag = chi_accepted_CCP71
		add_ideas = CCP_integrated_army
		FROM = { country_event = { id = CCP.72 }}
	}
	
	option = {
		ai_chance = { factor = 10 }
		name = CCP.70.b
		FROM = { country_event = { id = CCP.73 }}
	}
}

#alliance ok
country_event = {
	id = CCP.72
	title = CCP.72.t
	desc = CCP.72.d
	
	picture = GFX_report_event_generic_sign_treaty2
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	option = {
		name = CCP.72.a
		effect_tooltip = {
			FROM = {
				add_ideas = CCP_integrated_army
			}
		}
	}
}

#alliance no
country_event = {
	id = CCP.73
	title = CCP.73.t
	desc = CCP.73.d
	
	picture = GFX_report_event_generic_sign_treaty2
	
	is_triggered_only = yes

	option = {
		name = CCP.73.a
	}
	
}

#share military knowledge
country_event = {
	id = CCP.74
	title = CCP.74.t
	desc = CCP.74.d
	
	picture = GFX_report_event_chinese_soldiers
	
	is_triggered_only = yes

	option = {
		name = CCP.74.a
		ai_chance = { 
			factor = 100
			modifier = {
				FROM = {
					has_government = communism
				}
				factor = 60
			}
		}
		add_ideas = CCP_military_knowledge
		add_tech_bonus = {
			bonus = 0.5
			uses = 1
			category = land_doctrine
		}
		FROM = {
			add_ideas = CCP_kmt_military_knowledge
			add_tech_bonus = {
				bonus = 0.5
				uses = 1
				category = land_doctrine
			}
			country_event = {
				id = CCP.75
			}
		}
	}
	
	option = {
		name = CCP.74.b
		ai_chance = { factor = 0 }
		FROM = {
			country_event = { id = CCP.76 }
		}
	}
}

#share military knowledge ok
country_event = {
	id = CCP.75
	title = CCP.75.t
	desc = CCP.75.d
	
	picture = GFX_report_event_chinese_soldiers
	
	is_triggered_only = yes

	option = {
		name = CCP.75.a
		effect_tooltip = {
			add_ideas = CCP_kmt_military_knowledge
			add_tech_bonus = {
				bonus = 0.5
				uses = 1
				category = land_doctrine
			}
			country_event = {
				id = CCP.75
			}
		}
	}
}

#share military knowledge no
country_event = {
	id = CCP.76
	title = CCP.76.t
	desc = CCP.76.d
	
	picture = GFX_report_event_chinese_soldiers
	
	is_triggered_only = yes

	option = {
		name = CCP.76.a
	}
}

#CCP send apologise
country_event = {
	id = CCP.77
	title = CCP.77.t
	desc = CCP.77.d
	
	picture = GFX_report_event_stalin_meeting
	
	is_triggered_only = yes

	option = {
		name = CCP.77.a
		ai_chance = {
			factor = 40
		}
		clr_global_flag = CCP_defy_sov_order
		remove_opinion_modifier = {
			target = CCP
			modifier = CCP_defy_order
		}
		remove_opinion_modifier = {
			target = CCP
			modifier = CCP_defy_order_2
		}
		FROM = {
			country_event = { id = CCP.78 }
				if = {
					limit = {
						SOV = {
							has_tech = infantry_weapons
							NOT = {
								has_tech = infantry_weapons1
							}
						}
					}
					add_equipment_to_stockpile = { type = infantry_equipment_0 amount = 1000 producer = SOV }
				}
				if = {
					limit = {
						SOV = {
							has_tech = infantry_weapons1
							NOT = {
								has_tech = improved_infantry_weapons
							}
						}
					}
					add_equipment_to_stockpile = { type = infantry_equipment_1 amount = 1000 producer = SOV }
				}
				if = {
					limit = {
						SOV = {
							has_tech = improved_infantry_weapons
							NOT = {
								has_tech = advanced_infantry_weapons
							}
						}
					}
					add_equipment_to_stockpile = { type = infantry_equipment_2 amount = 1000 producer = SOV }
				}
				if = {
					limit = {
						SOV = {
							has_tech = advanced_infantry_weapons
						}
					}
					add_equipment_to_stockpile = { type = infantry_equipment_3 amount = 1000 producer = SOV }
				}
		}
	}

	option = {
		name = CCP.77.b
		ai_chance = {
			factor = 60
		}
		FROM = {
			country_event = { id = CCP.79 }
		}
	}
}

#apologise yes
country_event = {
	id = CCP.78
	title = CCP.78.t
	desc = CCP.78.d
	
	picture = GFX_report_event_stalin_02
	
	is_triggered_only = yes

	option = {
		name = CCP.78.a
		effect_tooltip = {
				if = {
					limit = {
						SOV = {
							has_tech = infantry_weapons
							NOT = {
								has_tech = infantry_weapons1
							}
						}
					}
					add_equipment_to_stockpile = { type = infantry_equipment_0 amount = 1000 producer = SOV }
				}
				if = {
					limit = {
						SOV = {
							has_tech = infantry_weapons1
							NOT = {
								has_tech = improved_infantry_weapons
							}
						}
					}
					add_equipment_to_stockpile = { type = infantry_equipment_1 amount = 1000 producer = SOV }
				}
				if = {
					limit = {
						SOV = {
							has_tech = improved_infantry_weapons
							NOT = {
								has_tech = advanced_infantry_weapons
							}
						}
					}
					add_equipment_to_stockpile = { type = infantry_equipment_2 amount = 1000 producer = SOV }
				}
				if = {
					limit = {
						SOV = {
							has_tech = advanced_infantry_weapons
						}
					}
					add_equipment_to_stockpile = { type = infantry_equipment_3 amount = 1000 producer = SOV }
				}
		}
	}
}

#apologise no
country_event = {
	id = CCP.79
	title = CCP.79.t
	desc = CCP.79.d
	
	picture = GFX_report_event_stalin_propaganda
	
	is_triggered_only = yes

	option = {
		name = CCP.79.a
	}
}

#pressure from from
country_event = {
	id = CCP.80
	title = CCP.80.t
	desc = CCP.80.d
	
	picture = GFX_report_event_military_planning
	
	is_triggered_only = yes

	option = {
		name = CCP.80.a
		ai_chance = {
			factor = 5
			modifier = {
				FROM = {
					strength_ratio = { 
						tag = ROOT 
						ratio < 0.25
					}
				}
				add = 5
			}
			modifier = {
				FROM = {
					strength_ratio = { 
						tag = ROOT 
						ratio < 0.5
					}
				}
				add = 5
			}
			modifier = {
				FROM = {
					strength_ratio = { 
						tag = ROOT 
						ratio < 0.75
					}
				}
				add = 5
			}
			modifier = {
				FROM = {
					strength_ratio = { 
						tag = ROOT 
						ratio < 1
					}
				}
				add = 5
			}
			modifier = {
				FROM = {
					divisions_in_state = { state = 921 size > 10}
				}
				add = 15
			}
			modifier = {
				tag = MEN
				has_war_with = CCP
				surrender_progress > 0.49
				factor = 95
			}
		}
		if = {
			limit = {
				is_puppet = yes
			}
			overlord = { country_event = { id = CCP.83 }}
		}
		FROM = {
			puppet = ROOT
			country_event = { id = CCP.81 }
		}
	}

	option = {
		name = CCP.80.b
		ai_chance = {
			factor = 95
			modifier = {
				FROM = {
					strength_ratio = { 
						tag = ROOT 
						ratio < 0.25
					}
				}
				add = -5
			}
			modifier = {
				FROM = {
					strength_ratio = { 
						tag = ROOT 
						ratio < 0.5
					}
				}
				add = -5
			}
			modifier = {
				FROM = {
					strength_ratio = { 
						tag = ROOT 
						ratio < 0.75
					}
				}
				add = -5
			}
			modifier = {
				FROM = {
					divisions_in_state = { state = 921 size > 10}
				}
				add = -15
			}
		}
		FROM = {
			country_event = { id = CCP.82 }
		}
	}
}

#from puppeted
country_event = {
	id = CCP.81
	title = CCP.81.t
	desc = CCP.81.d
	
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	option = {
		name = CCP.81.a
		effect_tooltip = {
			puppet = FROM
		}
	}
}

#from refused
country_event = {
	id = CCP.82
	title = CCP.82.t
	desc = CCP.82.d
	
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	option = {
		name = CCP.82.a
		if = {
			limit = {
				FROM = {
					is_puppet = yes
				}
			}
			FROM = {
				overlord = {
					save_event_target_as = CCP_82_event_target
				}
			}
			create_wargoal = {
				target = event_target:CCP_82_event_target
				type = take_state_focus
				generator = {611}
			}
			else = {
				create_wargoal = {
					target = FROM
					type = puppet_wargoal_focus
				}
			}
		}
	}
}


#from betrayed us
country_event = {
	id = CCP.83
	title = CCP.83.t
	desc = CCP.83.d
	
	picture = GFX_report_event_chinese_soldiers_fighting
	
	is_triggered_only = yes

	option = {
		name = CCP.83.a
		effect_tooltip = {
			CCP = { puppet = FROM }
		}
	}
}


#CCP want our land
country_event = {
	id = CCP.84
	title = CCP.84.t
	desc = CCP.84.d
	
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	option = {
		name = CCP.84.a
		ai_chance = {
			factor = 50
			modifier = {
				is_in_faction = yes
				add = -45
			}
			modifier = {
				is_faction_leader = yes
				add = -50
			}
			modifier = {
				FROM = {
					strength_ratio = {
						tag = ROOT
						ratio > 0.25
					}
				}
				add = 5
			}
			modifier = {
				FROM = {
					strength_ratio = {
						tag = ROOT
						ratio > 0.5
					}
				}
				add = 10
			}
			modifier = {
				FROM = {
					strength_ratio = {
						tag = ROOT
						ratio > 0.75
					}
				}
				add = 15
			}
			modifier = {
				FROM = {
					strength_ratio = {
						tag = ROOT
						ratio > 1
					}
				}
				add = 20
			}
			modifier = {
				is_major = yes
				add = -100
			}
		}
		if = {
			limit = {
				ROOT = {
					owns_state = 330
				}
			}
			set_country_flag = CCP_330_owner_return
			FROM = {
				transfer_state = 330
			}
		}
		if = {
			limit = {
				ROOT = {
					owns_state = 329
				}
			}
			set_country_flag = CCP_329_owner_return
			FROM = {
				transfer_state = 329
			}
		}
		FROM = {
			country_event = { id = CCP.85 }
		}
	}

	option = {
		name = CCP.84.b
		ai_chance = {
			factor = 50
		}
		if = {
			limit = {
				ROOT = {
					owns_state = 330
				}
			}
			set_country_flag = CCP_330_owner_refuse
			effect_tooltip = {
				FROM = {
					create_wargoal = {
						target = ROOT
						type = take_state_focus
						generator = {330}
					}
				}
			}
		}
		if = {
			limit = {
				ROOT = {
					owns_state = 329
				}
			}
			set_country_flag = CCP_329_owner_refuse
			effect_tooltip = {
				FROM = {
					create_wargoal = {
						target = ROOT
						type = take_state_focus
						generator = {329}
					}
				}
			}

		}
		FROM = {
			country_event = { id = CCP.86 }
		}
	}
}


#from complies
country_event = {
	id = CCP.85
	title = CCP.85.t
	desc = CCP.85.d
	
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	option = {
		name = CCP.85.a
		if = {
			limit = {
				FROM = {
					has_country_flag = CCP_330_owner_return
				}
			}
			effect_tooltip = {
				transfer_state = 330
			}
		}
		if = {
			limit = {
				FROM = {
					has_country_flag = CCP_329_owner_return
				}
			}
			effect_tooltip = {
				transfer_state = 329
			}
		}
	}
}


#from refuses
country_event = {
	id = CCP.86
	title = CCP.86.t
	desc = CCP.86.d
	
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	option = {
		name = CCP.86.a
		if = {
			limit = {
				FROM = {
					has_country_flag = CCP_330_owner_refuse
				}
			}
			create_wargoal = {
				target = FROM
				type = take_state_focus
				generator = {330}
			}
		}
		if = {
			limit = {
				FROM = {
					has_country_flag = CCP_329_owner_refuse
				}
			}
			create_wargoal = {
				target = FROM
				type = take_state_focus
				generator = {329}
			}
		}
	}
}


#pressure from from
country_event = {
	id = CCP.87
	title = CCP.80.t
	desc = CCP.87.d
	
	picture = GFX_report_event_generic_sign_treaty1
	
	is_triggered_only = yes

	option = {
		name = CCP.87.a
		CCP = {
			puppet = ROOT
			country_event = { id = CCP.88 }
		}
	}

	option = {
		name = CCP.87.b
		FROM = {
			add_ai_strategy = {
				id = "KOR"
				type = antagonize
				value = 75
			}
			country_event = { id = CCP.82 }
		}
	}
}


#from submit
country_event = {
	id = CCP.88
	title = CCP.81.t
	desc = CCP.81.d
	
	picture = GFX_report_event_generic_sign_treaty1
	
	is_triggered_only = yes

	option = {
		name = CCP.81.a
		ai_chance = {
			factor = 100
		}
		effect_tooltip = {
			puppet = FROM
		}
	}

	option = {
		name = CCP.88.a
		annex_country = {
			target = FROM
			transfer_troops = yes
		}
	}
}


#from demand tp return
country_event = {
	id = CCP.89
	title = CCP.89.t
	desc = CCP.84.d
	
	picture = GFX_report_event_generic_sign_treaty1
	
	is_triggered_only = yes

	option = {
		name = CCP.84.a
		ai_chance = {
			factor = 40
			modifier = {
				is_in_faction = yes
				add = -35
			}
			modifier = {
				is_faction_leader = yes
				add = -50
			}
			modifier = {
				FROM = {
					strength_ratio = {
						tag = ROOT
						ratio > 0.25
					}
				}
				add = 5
			}
			modifier = {
				FROM = {
					strength_ratio = {
						tag = ROOT
						ratio > 0.5
					}
				}
				add = 10
			}
			modifier = {
				FROM = {
					strength_ratio = {
						tag = ROOT
						ratio > 0.75
					}
				}
				add = 15
			}
			modifier = {
				FROM = {
					strength_ratio = {
						tag = ROOT
						ratio > 1
					}
				}
				add = 20
			}
			modifier = {
				is_major = yes
				add = -100
			}
		}
		if = {
			limit = {
				ROOT = {
					owns_state = 728
				}
			}
			set_country_flag = CCP_728_owner_return
			FROM = {
				transfer_state = 728
			}
		}
		if = {
			limit = {
				ROOT = {
					owns_state = 729
				}
			}
			set_country_flag = CCP_729_owner_return
			FROM = {
				transfer_state = 729
			}
		}
		if = {
			limit = {
				ROOT = {
					owns_state = 326
				}
			}
			set_country_flag = CCP_326_owner_return
			FROM = {
				transfer_state = 326
			}
		}
		FROM = {
			country_event = { id = CCP.90 }
		}
	}

	option = {
		name = CCP.84.b
		ai_chance = {
			factor = 60
		}
		if = {
			limit = {
				ROOT = {
					owns_state = 728
				}
			}
			set_country_flag = CCP_728_owner_refuse
			effect_tooltip = {
				FROM = {
					create_wargoal = {
						target = ROOT
						type = take_state_focus
						generator = {728}
					}
				}
			}
		}
		if = {
			limit = {
				ROOT = {
					owns_state = 729
				}
			}
			set_country_flag = CCP_729_owner_refuse
			effect_tooltip = {
				FROM = {
					create_wargoal = {
						target = ROOT
						type = take_state_focus
						generator = {729}
					}
				}
			}
		}
		if = {
			limit = {
				ROOT = {
					owns_state = 326
				}
			}
			set_country_flag = CCP_326_owner_refuse
			effect_tooltip = {
				FROM = {
					create_wargoal = {
						target = ROOT
						type = take_state_focus
						generator = {326}
					}
				}
			}
		}
		FROM = {
			country_event = { id = CCP.91 }
		}
	}
}


#from complies
country_event = {
	id = CCP.90
	title = CCP.85.t
	desc = CCP.85.d
	
	picture = GFX_report_event_generic_sign_treaty1
	
	is_triggered_only = yes

	option = {
		name = CCP.85.a
		if = {
			limit = {
				FROM = {
					has_country_flag = CCP_728_owner_return
				}
			}
			effect_tooltip = {
				transfer_state = 728
			}
		}
		if = {
			limit = {
				FROM = {
					has_country_flag = CCP_729_owner_return
				}
			}
			effect_tooltip = {
				transfer_state = 729
			}
		}
		if = {
			limit = {
				FROM = {
					has_country_flag = CCP_326_owner_return
				}
			}
			effect_tooltip = {
				transfer_state = 326
			}
		}
	}
}


#from refuses
country_event = {
	id = CCP.91
	title = CCP.86.t
	desc = CCP.86.d
	
	picture = GFX_report_event_generic_sign_treaty1
	
	is_triggered_only = yes

	option = {
		name = CCP.86.a
		if = {
			limit = {
				FROM = {
					has_country_flag = CCP_728_owner_refuse
				}
			}
			create_wargoal = {
				target = FROM
				type = take_state_focus
				generator = {728}
			}
		}
		if = {
			limit = {
				FROM = {
					has_country_flag = CCP_729_owner_refuse
				}
			}
			create_wargoal = {
				target = FROM
				type = take_state_focus
				generator = {729}
			}
		}
		if = {
			limit = {
				FROM = {
					has_country_flag = CCP_326_owner_refuse
				}
			}
			create_wargoal = {
				target = FROM
				type = take_state_focus
				generator = {326}
			}
		}
	}
}


#CCP try to takeover
country_event = {
	id = CCP.92
	title = CCP.92.t
	desc = CCP.92.d
	
	picture = GFX_report_event_china_politicians_captured
	
	is_triggered_only = yes

	option = {
		name = CCP.92.a
		ai_chance = {
			factor = 100
			modifier = {
				strength_ratio = {
					tag = FROM
					ratio > 0.25
				}
				add = -25
			}
			modifier = {
				strength_ratio = {
					tag = FROM
					ratio > 0.5
				}
				add = -25
			}
			modifier = {
				strength_ratio = {
					tag = FROM
					ratio > 0.75
				}
				add = -25
			}
			modifier = {
				strength_ratio = {
					tag = FROM
					ratio > 1
				}
				add = -25
			}
		}
		FROM = {
			end_puppet = ROOT
		}
		hidden_effect = {
			if = {
				limit = {
					has_war_together_with = FROM
				}
				if = {
					limit = {
						has_government = democratic
					}
					random_country = {
						limit = {
							has_government = democratic
							has_war = no
							exists = yes
						}
						puppet = ROOT
						end_puppet = ROOT
					}
					if = {
						limit = {
							NOT = {
								any_country = {
									NOT = { tag = ROOT }
									has_government = democratic
								}
							}
						}
						random_country = {
							limit = {
								has_war = no
								exists = yes
							}
							puppet = ROOT
							end_puppet = ROOT
						}
					}
				}
				if = {
					limit = {
						has_government = communism
					}
					random_country = {
						limit = {
							has_government = communism
							has_war = no
							exists = yes
						}
						puppet = ROOT
						end_puppet = ROOT
					}
					if = {
						limit = {
							NOT = {
								any_country = {
									NOT = { tag = ROOT }
									has_government = communism
								}
							}
						}
						random_country = {
							limit = {
								has_war = no
								exists = yes
							}
							puppet = ROOT
							end_puppet = ROOT
						}
					}
				}
				if = {
					limit = {
						has_government = fascism
					}
					random_country = {
						limit = {
							has_government = fascism
							has_war = no
							exists = yes
						}
						puppet = ROOT
						end_puppet = ROOT
					}
					if = {
						limit = {
							NOT = {
								any_country = {
									NOT = { tag = ROOT }
									has_government = fascism
								}
							}
						}
						random_country = {
							limit = {
								has_war = no
								exists = yes
							}
							puppet = ROOT
							end_puppet = ROOT
						}
					}
				}
				if = {
					limit = {
						has_government = neutrality
					}
					random_country = {
						limit = {
							has_government = neutrality
							has_war = no
							exists = yes
						}
						puppet = ROOT
						end_puppet = ROOT
					}
					if = {
						limit = {
							NOT = {
								any_country = {
									NOT = { tag = ROOT }
									has_government = neutrality
								}
							}
						}
						random_country = {
							limit = {
								has_war = no
								exists = yes
							}
							puppet = ROOT
							end_puppet = ROOT
						}
					}
				}
			}
		}
		declare_war_on = {
			target = FROM
			type = topple_government
		}
		remove_ideas = CCP_influence
		FROM = {
			country_event = { id = CCP.93 }
		}
	}
	
	option = {
		name = CCP.92.b
		FROM = {
			annex_country = {
				target = ROOT
				transfer_troops = yes
			}
			country_event = { id = CCP.94 }
		}
	}
}


#from rebel
country_event = {
	id = CCP.93
	title = CCP.93.t
	desc = CCP.93.d
	
	picture = GFX_report_event_chinese_soldiers_fighting
	
	is_triggered_only = yes

	option = {
		name = CCP.93.a
		effect_tooltip = {
			end_puppet = FROM
			FROM = {
				declare_war_on = {
					target = ROOT
					type = topple_government
				}
			}
		}
	}
}


#from submit
country_event = {
	id = CCP.94
	title = CCP.81.t
	desc = CCP.81.d
	
	picture = GFX_report_event_generic_sign_treaty1
	
	is_triggered_only = yes

	option = {
		name = CCP.81.a
		effect_tooltip = {
			annex_country = {
				target = FROM
			}
		}
	}
}


#from seek pact
country_event = {
	id = CCP.95
	title = CCP.95.t
	desc = CCP.95.d
	
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	option = {
		name = CCP.95.a
		ai_chance = {
			factor = 25
		}
		FROM = {
			country_event = { id = CCP.96 }
			set_country_flag = has_pact_with_jap
		}
		diplomatic_relation = { country = FROM relation = non_aggression_pact }
	}

	option = {
		name = CCP.95.b
		ai_chance = {
			factor = 75
		}
		FROM = {
			country_event = { id = CCP.97 }
		}
	}
}


#pact accepted
country_event = {
	id = CCP.96
	title = CCP.96.t
	desc = CCP.96.d
	
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			diplomatic_relation = { country = FROM relation = non_aggression_pact }
		}
	}

	option = {
		name = CCP.96.a
		effect_tooltip = {
			diplomatic_relation = { country = FROM relation = non_aggression_pact }
		}
	}
}


#pact rejected
country_event = {
	id = CCP.97
	title = CCP.97.t
	desc = CCP.97.d
	
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	option = {
		name = CCP.97.a
	}
}

#kor
country_event = {
	id = CCP.98
	title = CCP.80.t
	desc = CCP.87.d
	
	picture = GFX_report_event_generic_sign_treaty2
	
	is_triggered_only = yes

	option = {
		name = CCP.87.a
		ai_chance = {
			factor = 50
			modifier = {
				FROM = {
					strength_ratio = {
						tag = ROOT
						ratio > 0.25
					}
				}
				add = 5
			}
			modifier = {
				FROM = {
					strength_ratio = {
						tag = ROOT
						ratio > 0.5
					}
				}
				add = 10
			}
			modifier = {
				FROM = {
					strength_ratio = {
						tag = ROOT
						ratio > 0.75
					}
				}
				add = 15
			}
			modifier = {
				FROM = {
					strength_ratio = {
						tag = ROOT
						ratio > 1
					}
				}
				add = 20
			}
		}
		FROM = {
			puppet = ROOT
			country_event = { id = CCP.99 }
		}
	}

	option = {
		name = CCP.87.b
		ai_chance = {
			factor = 50
		}
		FROM = {
			country_event = { id = CCP.100 }
			create_wargoal = {
				target = ROOT
				type = annex_everything
			}
		}
	}
}

#kor yes
country_event = {
	id = CCP.99
	title = CCP.81.t
	desc = CCP.81.d
	
	picture = GFX_report_event_generic_sign_treaty2
	
	is_triggered_only = yes

	option = {
		name = CCP.81.a
		effect_tooltip = {
			puppet = FROM
		}
	}
}

#kor no
country_event = {
	id = CCP.100
	title = CCP.82.t
	desc = CCP.82.d
	
	picture = GFX_report_event_generic_sign_treaty2
	
	is_triggered_only = yes

	option = {
		name = CCP.82.a
		effect_tooltip = {
			create_wargoal = {
				target = FROM
				type = annex_everything
			}
		}
	}
}

country_event = {
	id = CCP.101
	title = Hmmmmmmmmmmmm
	desc = How_do_you_trigger_this_event
	
	picture = GFX_report_event_airplane_crash
	
	is_triggered_only = yes

	option = {
		name = Through_console_command_i_see
	}
}

#WPPO
country_event = {
	id = CCP.102
	title = CCP.102.t
	desc = CCP.102.d
	
	picture = GFX_report_event_military_planning
	
	is_triggered_only = yes

	option = {
		name = CCP.102.a
		ai_chance = { factor = 100 }
		if = {
			limit = {
				is_faction_leader = yes
			}
			every_other_country = {
				limit = {
					is_in_faction_with = ROOT
				}
				set_country_flag = wppo_invite
			}
		}
		FROM = {
			add_to_faction = ROOT
		}
		every_other_country = {
			limit = {
				has_country_flag = wppo_invite
			}
			FROM = {
				add_to_faction = PREV
			}
		}
		FROM = {
			country_event = { id = CCP.103 }
		}
	}

	option = {
		name = CCP.102.b
		FROM = {
			country_event = { id = CCP.104 }
		}
	}
}

#WPPO formed
country_event = {
	id = CCP.103
	title = CCP.103.t
	desc = CCP.103.d
	
	picture = GFX_report_event_usa_heavy_cruiser
	
	is_triggered_only = yes

	option = {
		name = CCP.103.a
		effect_tooltip = {
			add_to_faction = FROM
		}
	}
}

#WPPO rejected
country_event = {
	id = CCP.104
	title = CCP.104.t
	desc = CCP.104.d
	
	picture = GFX_report_event_chinese_officers
	
	is_triggered_only = yes

	option = {
		name = CCP.104.a
	}
}

#WPPO supported coup
country_event = {
	id = CCP.105
	title = CCP.105.t
	desc = CCP.105.d
	
	picture = GFX_report_event_spain_civil_war_volunteers_02
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			start_civil_war = {
				ideology = fascism
				size = 0.65
			}
			random_country = {
				limit = {
					original_tag = ROOT
					has_government = fascism
					has_civil_war = yes
				}
				JAP = {
					add_to_faction = PREV
				}
			}
		}
	}

	option = {
		name = CCP.105.a
		effect_tooltip = {
			start_civil_war = {
				ideology = fascism
				size = 0.65
			}
			random_country = {
				limit = {
					original_tag = ROOT
					has_government = fascism
					has_civil_war = yes
				}
				JAP = {
					add_to_faction = PREV
				}
			}
		}
	}
}

#CCP burn bridge
country_event = {
	id = CCP.106
	title = CCP.106.t
	desc = CCP.106.d
	
	picture = GFX_report_event_soldiers_marching
	
	is_triggered_only = yes

	option = {
		name = CCP.106.a
		effect_tooltip = {
			remove_from_faction = FROM
		}
		FROM = {
			declare_war_on = {
				target = ROOT
				type = puppet_wargoal_focus	
			}
		}
	}
}

#CCP burn bridge
country_event = {
	id = CCP.107
	hidden = yes
	
	trigger = {
		NOT = {
			has_idea = CCP_revanchism
		}
		has_idea = CCP_anti_jap_sentiment
		has_war_with = JAP
	}
	
	mean_time_to_happen = { days = 2 }

	immediate = {
		add_ideas = CCP_revanchism
	}
	option = {}
}

#rescue zxl?
country_event = {
	id = CCP.108
	title = CCP.108.t
	desc = CCP.108.d
	
	picture = GFX_report_event_airplane_crash
	
	trigger = {
		has_global_flag = zxl_arrested
		tag = CCP
		NOT = {
			has_completed_focus = CCP_form_the_grand_northwest_united
			has_global_flag = zxl_assassinated
		}
	}
	
	mean_time_to_happen = { days = 2 }
	
	fire_only_once = yes

	option = {
		name = CCP.108.a
		clr_global_flag = zxl_arrested
		CHI = {
			add_opinion_modifier = {
				target = CCP
				modifier = hostile_status
			}
		}
	}

	option = {
		name = CCP.108.b
		set_global_flag = no_rescue_zhang
	}
}

#take dongbei and peace?
country_event = {
	id = CCP.109
	title = CCP.109.t
	desc = CCP.109.d
	
	picture = GFX_report_event_airplane_crash
	
	trigger = {
		has_war_with = JAP
		tag = CCP
		no_jap_in_manchuria = yes
		OR = {
			is_in_faction = no
			is_faction_leader = yes
		}
	}
	
	mean_time_to_happen = { days = 10 }
	
	fire_only_once = yes

	option = {
		name = CCP.109.a
		ai_chance = {
			factor = 1
		}
		JAP = {
			country_event = { id = CCP.110 }
			custom_effect_tooltip = needs_approval
		}
		effect_tooltip = {
			white_peace = JAP
			custom_effect_tooltip = CCP_takeover_dongbei_tt
		}
	}

	option = {
		name = CCP.109.b
		trigger = {
			NOT = {
				has_global_flag = jap_civil_war_sf
			}
		}
		ai_chance = {
			factor = 100
		}
		set_global_flag = wait_for_jap_civil_war
		custom_effect_tooltip = CCP_wait_for_civil_war_tt
	}

	option = {
		ai_chance = {
			factor = 0
		}
		name = CCP.109.c
	}
}

#peace with CCP?
country_event = {
	id = CCP.110
	title = CCP.110.t
	desc = CCP.110.d
	
	picture = GFX_report_event_airplane_crash
	
	is_triggered_only = yes

	option = {
		name = CCP.110.a
		ai_chance = {
			factor = 25
			modifier = {
				has_civil_war = yes
				factor = 100
			}
		}
		FROM = {
			country_event = { id = CCP.111 }
		}
		effect_tooltip = {
			white_peace = FROM
			custom_effect_tooltip = CCP_takeover_dongbei_tt
		}
	}

	option = {
		name = CCP.110.b
		FROM = {
			country_event = { id = CCP.112 }
		}
	}
}

#peace yes
country_event = {
	id = CCP.111
	title = CCP.111.t
	desc = CCP.111.d
	
	picture = GFX_report_event_airplane_crash
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			white_peace = FROM
			every_state = {
				limit = {
					OR = {
						region = 328
						state = 609
						state = 611
						state = 612
					}
					NOT = {
						state = 527
						state = 525
					}
					owner = {
						OR = {
							tag = JAP
							has_country_flag = JAP_puppet
						}
					}
				}
				CCP = {
					transfer_state = PREV
				}
			}
		}
	}

	option = {
		name = CCP.111.a
		effect_tooltip = {
			white_peace = FROM
			every_state = {
				limit = {
					OR = {
						region = 328
						state = 609
						state = 611
						state = 612
					}
					NOT = {
						state = 527
						state = 525
					}
					owner = {
						OR = {
							tag = JAP
							has_country_flag = JAP_puppet
						}
					}
				}
				CCP = {
					transfer_state = PREV
				}
			}
		}
	}
}

#peace no
country_event = {
	id = CCP.112
	title = CCP.112.t
	desc = CCP.112.d
	
	picture = GFX_report_event_airplane_crash
	
	is_triggered_only = yes

	option = {
		name = CCP.112.a
	}
}

#check for states ownership for .114
country_event = {
	id = CCP.113
	hidden = yes
	
	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				has_war_with = JAP
				tag = CCP
				no_jap_in_manchuria = yes
				OR = {
					is_in_faction = no
					is_faction_leader = yes
				}
			}
			country_event = {
				id = CCP.114
			}
			else = {
				country_event = { id = CCP.113 days = 10 }
			}
		}
	}
	option = {}
}

#peace?
country_event = {
	id = CCP.114
	title = CCP.109.t
	desc = CCP.114.d
	
	picture = GFX_report_event_chinese_soldiers_fighting
	
	trigger = {
		has_war_with = JAP
		tag = CCP
		no_jap_in_manchuria = yes
	}
	
	mean_time_to_happen = { days = 10 }
	
	fire_only_once = yes

	option = {
		name = CCP.109.a
		ai_chance = {
			factor = 1
		}
		JAP = {
			country_event = { id = CCP.110 }
			custom_effect_tooltip = needs_approval
		}
		effect_tooltip = {
			white_peace = JAP
			custom_effect_tooltip = CCP_takeover_dongbei_tt
		}
	}

	option = {
		ai_chance = {
			factor = 0
		}
		name = CCP.109.c
	}
}

#henan famine
country_event = {
	id = CCP.115
	title = CCP.115.t
	desc = CCP.115.d
	
	picture = GFX_report_event_dead_soldiers
	
	trigger = {
		owns_state = 607
		607 = {
			controller = {
				has_war_with = ROOT
			}
		}
	}
	
	mean_time_to_happen = { days = 20 }
	
	fire_only_once = yes

	option = {
		name = CCP.115.a
		add_timed_idea = {
			idea = KMT_aid_famine
			days = 365
		}
	}

	option = {
		name = CCP.115.b
		ai_chance = {
			factor = 0
		}
		if = {
			limit = {
				OR = {
					has_government = neutrality
					has_government = fascism
				}
			}
			add_timed_idea = {
				idea = KMT_no_aid_famine_comm
				days = 150
			}
			add_popularity = {
				popularity = 0.05
				ideology = communism
			}
		}
		if = {
			limit = {
				has_government = democratic
			}
			add_timed_idea = {
				idea = KMT_no_aid_famine_fasc
				days = 150
			}
			add_popularity = {
				popularity = 0.05
				ideology = fascism
			}
		}
		if = {
			limit = {
				has_government = communism
			}
			add_timed_idea = {
				idea = KMT_no_aid_famine_demo
				days = 150
			}
			add_popularity = {
				popularity = 0.05
				ideology = democratic
			}
		}
	}
}

#commie generals
country_event = {
	id = CCP.116
	title = CCP.116.t
	desc = CCP.116.d
	
	picture = GFX_report_event_chinese_officers
	
	trigger = {
		tag = CHI
		has_completed_focus = KMT_implement_parliamentary_system
		NOT = {
			country_exists = CCP
		}
	}
	
	mean_time_to_happen = { days = 2 }
	
	fire_only_once = yes

	immediate = {
		hidden_effect = {
			create_corps_commander = {
				name = "Lin Biao"
				portrait_path = "gfx/leaders/kmt_mod/Lin_Biao.dds"
				traits = { trickster }
				skill = 3
					attack_skill = 2
						defense_skill = 3
						planning_skill = 2
						logistics_skill = 2
			}

			create_corps_commander = {
				name = "Zhu De"
				portrait_path = "gfx/leaders/kmt_mod/Zhu_De.dds"
				skill = 3
					attack_skill = 2
						defense_skill = 3
						planning_skill = 2
						logistics_skill = 2
			}

			create_corps_commander = {
				name = "Chen Yi"
				portrait_path = "gfx/leaders/kmt_mod/Chen_Yi.dds"
				skill = 3
					attack_skill = 2
						defense_skill = 3
						planning_skill = 2
						logistics_skill = 2
			}

			create_corps_commander = {
				name = "Peng De Huai"
				portrait_path = "gfx/leaders/kmt_mod/Peng_De_Huai.dds"
				skill = 3
					attack_skill = 2
						defense_skill = 3
						planning_skill = 2
						logistics_skill = 2
			}
			CCP = {
				remove_unit_leader = 1065
				remove_unit_leader = 1066
				remove_unit_leader = 1067
				remove_unit_leader = 1068
			}
		}
	}

	option = {
		name = CCP.116.a
		custom_effect_tooltip = KMT_commie_generals_join_tt
	}
}

#xsm join kmt
country_event = {
	id = CCP.117
	title = CCP.117.t
	desc = CCP.117.d
	
	picture = GFX_report_event_chinese_soldiers_fighting
	
	is_triggered_only = yes

	option = {
		name = CCP.117.a
		effect_tooltip = {
			XSM = {
				add_to_war = {
					targeted_alliance = CHI
					enemy = CCP
				}
			}
		}
	}
}

#xsm join kmt
country_event = {
	id = CCP.119
	title = successs
	desc = you_have_successfully_+1s_for_the_elder
	
	picture = GFX_elder
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			create_field_marshal = {
				name = "The Elder"
				portrait_path = "gfx/leaders/kmt_mod/the_elder.dds"
				traits = {  }
				skill = 2
				attack_skill = 1
	defense_skill = 1
	planning_skill = 1
	logistics_skill = 1
			}
		}
	}

	option = {
		name = elder_has_returned
	}
}

#ask sik to join
country_event = {
	id = CCP.120
	title = CCP.120.t
	desc = CCP.120.t
	
	picture = GFX_report_event_generic_sign_treaty2
	
	is_triggered_only = yes
	
	option = {
		ai_chance = {
			factor = 40
			modifier = {
				has_government = communism
				SOV = {
					has_government = communism
				}
				add = 50
			}
		}
		name = CCP.120.a
		FROM = {
			add_to_faction = ROOT
			country_event = { id = CCP.121 }
		}
	}

	option = {
		name = CCP.120.b
		FROM = {
			country_event = { id = CCP.122 }
		}
	}
}

#sik join
country_event = {
	id = CCP.121
	title = CCP.121.t
	desc = CCP.121.t
	
	picture = GFX_report_event_generic_sign_treaty2
	
	is_triggered_only = yes
	
	option = {
		name = CCP.121.a
		effect_tooltip = {
			add_to_faction = FROM
		}
	}
}

#sik no join
country_event = {
	id = CCP.122
	title = CCP.122.t
	desc = CCP.122.t
	
	picture = GFX_report_event_generic_sign_treaty2
	
	is_triggered_only = yes
	
	option = {
		name = CCP.122.a
		effect_tooltip = {
			add_to_faction = FROM
		}
	}
}

#invite sik?
country_event = {
	id = CCP.123
	title = CCP.123.t
	desc = CCP.123.t
	
	picture = GFX_report_event_generic_sign_treaty2
	
	is_triggered_only = yes
	
	option = {
		ai_chance = {
			factor = 100
		}
		name = CCP.123.a
		SIK = {
			country_event = { id = CCP.120 }
		}
	}

	option = {
		name = CCP.123.b
	}
}